import*as e from"react";import n from"react";import{GLSL as t}from"glslcv";var r=function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},r.apply(this,arguments)};function o(e,n,t){if(t||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}function i(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}"function"==typeof SuppressedError&&SuppressedError;var a={vars:"UiUi-module_vars__dX-bI",uiUiRoot:"UiUi-module_uiUiRoot__5TLZo",docks:"UiUi-module_docks__WCBJG",topDock:"UiUi-module_topDock__iLi6B",bottomDock:"UiUi-module_bottomDock__toQ46"};i(".UiUi-module_vars__dX-bI {\n  --single-line-height-px: 9px;\n  --label-size: 8px;\n  --label-weight: 400;\n  --label-kerning: -0.04em;\n  --label-color: #000;\n  --label-padding-vertical: 3px;\n  --label-padding-horizontal: 0px;\n  --value-size: 8px;\n  --value-weight: 600;\n  --value-kerning: -0.06em;\n  --value-color: #000;\n  --value-padding-vertical: 3px;\n  --value-padding-horizontal: 0px;\n  --panel-background: radial-gradient(\n    circle at 50% 0,\n    rgb(140, 155, 155, 0.5),\n    rgb(200, 200, 250, 0.1) 70.71%\n  ),\n   rgba(71, 71, 34, 0.4);\n  --panel-shadow: 1px 2px 5px rgba(0,0,0,0.6); }\n\n.UiUi-module_uiUiRoot__5TLZo {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px; }\n  .UiUi-module_uiUiRoot__5TLZo .UiUi-module_docks__WCBJG {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    right: 0px;\n    bottom: 0px;\n    display: flex;\n    flex-flow: column;\n    justify-content: space-between; }\n  .UiUi-module_uiUiRoot__5TLZo .UiUi-module_topDock__iLi6B {\n    position: relative;\n    width: 100%;\n    display: flex;\n    align-items: start; }\n  .UiUi-module_uiUiRoot__5TLZo .UiUi-module_bottomDock__toQ46 {\n    position: relative;\n    width: 100%;\n    display: flex;\n    align-items: end; }\n");var l={utilLayer:"GlobalLayer-module_utilLayer__IJ3tF"};i('.GlobalLayer-module_utilLayer__IJ3tF {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n  background-color: rgba(0, 0, 0, 0);\n  display: none; }\n  .GlobalLayer-module_utilLayer__IJ3tF[role="dragging"] {\n    display: block;\n    cursor: grabbing; }\n');var u,s=null;function c(){var n=e.useRef(null);return e.useEffect((function(){s=n.current}),[n]),e.createElement("div",{ref:n,className:l.utilLayer})}!function(e){e.getSingleton=function(){return s},e.setRole=function(e){null!==s&&s.setAttribute("role",e)},e.resetRole=function(){null!==s&&s.setAttribute("role","")}}(u||(u={}));var p,d={};function f(e){var t=e.data,r=e.top,i=e.bottom,l=e.defaultDock,u=void 0===l?"B":l,s=n.useState([]),d=s[0],f=s[1],m=n.useState([]),v=m[0],g=m[1];function h(e){console.log(e)}var _=n.useCallback((function(e,n){"T"===n?f(o(o([],d,!0),e,!0)):g(o(o([],v,!0),e,!0))}),[d,v]);return n.useEffect((function(){if(null!==t||null!==r||null!==i){if(null!==t){var e=Array.isArray(t)?t:p.process(t);"B"===u?g(p.render(e,h)):f(p.render(e,h))}if(r){e=Array.isArray(r)?r:p.process(r);_(p.render(e,h),"T")}if(i){e=Array.isArray(i)?i:p.process(i);_(p.render(e,h),"B")}}}),[t,i,r,u]),n.createElement("div",{className:"".concat(a.uiUiRoot," ").concat(a.vars)},n.createElement(c,null),n.createElement("div",{className:a.docks},n.createElement("div",{rel:"dock",className:a.topDock},d),n.createElement("div",{rel:"dock",className:a.bottomDock},v)))}!function(e){e.register=function(e,n,t){return d[e.name]={cfgKey:n,elem:e,builder:t,enabled:!1},d},e.enable=function(e){Array.isArray(e)||(e=[e]),e.map((function(e){return d[e.name].enabled=!0,e}))};e.process=function(e){var n={};Object.keys(e.panels).map((function(t){var r=e.panels[t];return n[t]={type:"panel",label:r.label,settings:{flow:"V"===r.orientation?"vertical":"horizontal"},value:[],cn:r.children,r:!0},t})),Object.keys(n).map((function(t){var r=n[t];return r.cn.map((function(t){if(n[t])r.value.push(n[t]),n[t].r=!1;else if(e.elements[t]){var o=e.elements[t];o.settings=o.args,r.value.push(o)}return t})),t}));var t=[];return Object.keys(n).map((function(e){return n[e].r?t.push(n[e]):0})),t},e.render=function(e,n){Array.isArray(e)||(e=[e]);var t=[];return e.map((function(e){var r,o,i=(r=e.type,o="",Object.keys(d).map((function(e){return d[e].cfgKey===r&&(o=e),e})),d[o]);if(i&&i.enabled){var a=i.builder(e,n);t.push(a)}return e})),t}}(p||(p={})),f.withData=function(e){return n.createElement(f,{data:e})};var m="Panel-module_uiPanel__SfZYo";i('.Panel-module_uiPanel__SfZYo {\n  position: relative;\n  border: 0;\n  border-radius: 3px;\n  margin: 2px;\n  padding: 3px;\n  background: var(--panel-background);\n  box-shadow: var(--panel-shadow);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  display: inline-flex;\n  flex-flow: column; }\n  .Panel-module_uiPanel__SfZYo:before {\n    position: absolute;\n    content: "";\n    top: 1px;\n    left: 1px;\n    right: 1px;\n    bottom: 1px;\n    border-radius: 3px;\n    border: 0.01em solid rgba(255, 255, 25, 0.2); }\n  .Panel-module_uiPanel__SfZYo > label {\n    display: flex;\n    align-items: center;\n    font-size: 7px;\n    margin: 0 0 0 1px;\n    text-transform: uppercase;\n    pointer-events: none;\n    color: #fff; }\n    .Panel-module_uiPanel__SfZYo > label > span {\n      display: inline-block;\n      background: rgba(255, 255, 255, 0.3);\n      flex-grow: 1;\n      height: 1px;\n      margin-left: 5px; }\n');var v={uiGroup:"Group-module_uiGroup__l-45E"};function g(e){var t=e.children,r=e.flow;return n.createElement("div",{className:v.uiGroup,"data-flow":null!=r?r:"col"},t)}function h(e){var t=e.o,r=e.onChange,o=n.useState([]),i=o[0],a=o[1];return n.useEffect((function(){a(p.render(t.value,r))}),[t]),n.createElement("div",{className:m,rel:"panel"},n.createElement("label",null,t.label,n.createElement("span",null," ")),n.createElement(g,{flow:t.settings.flow},i))}i('.Group-module_uiGroup__l-45E {\n  display: inline-flex;\n  flex-flow: column;\n  align-items: stretch;\n  margin: 0;\n  width: 100%;\n  min-width: 50px; }\n  .Group-module_uiGroup__l-45E[data-flow="row"] {\n    flex-flow: row;\n    align-items: center; }\n  .Group-module_uiGroup__l-45E > [rel="panel"] {\n    margin: 3px 0 0 0;\n    padding: 0 0 0 4px;\n    background: none;\n    border-top: none;\n    border-right: none;\n    border-bottom: none;\n    border-left: 1px solid #aaa;\n    border-radius: 0; }\n  .Group-module_uiGroup__l-45E > * {\n    margin: 3px 0 0; }\n'),p.register(h,"panel",(function(e,t){var r=e;return r.type="panel",void 0===r.settings&&(r.settings={flow:"row"}),void 0===r.settings.flow&&(r.settings.flow="row"),n.createElement(h,{key:e.label,o:r,onChange:t})}));i(".styles-module_container__QLNlc {\n  display: flex; }\n");var _,y={main:{container:"styles-module_container__QLNlc"}};!function(e){e.of=function(e){return y[e]},e.register=function(e,n){y[e]=n}}(_||(_={}));var b;function x(e,n){var t=n-e[0],r=e[1]-e[0];return"".concat(t/r*100,"%")}function w(e){var t=e.o,r=e.onChange,o=n.useRef(null),i=n.useState(t.value[0]),a=i[0],l=i[1],u=n.useState([0,1,.01]),s=u[0],c=u[1];function p(e){return s[e]?s[e]:0}n.useEffect((function(){var e,n=t.settings,r=t.value[0];c(n),l(r),null===(e=o.current)||void 0===e||e.style.setProperty("--width",x(n,r))}),[t]);var d=_.of("Slider");return n.createElement("div",{className:d.uiSlider},n.createElement("div",{ref:o,className:d.uiSliderThumbReplacement}),n.createElement("div",{className:d.uiSliderFlexContainer},n.createElement("label",{htmlFor:t.label},t.label),n.createElement("div",{className:d.uiSliderValue},a)),n.createElement("input",{type:"range",name:t.label,min:p(0),max:p(1),step:p(2),value:a,onChange:function(e){var n,i=Number(e.target.value);t.value[0]=i,l(i),null===(n=o.current)||void 0===n||n.style.setProperty("--width",x(s,i)),r&&r(t)}}))}function E(e,n){return void 0===n&&(n=null),{x:e="boolean"==typeof e?e?1:0:e,y:n=null!=(n="boolean"==typeof n?n?1:0:n)?n:e}}function S(e,n){return{a:e,b:n}}function C(e,n,t,r,o){void 0===o&&(o=0),e="number"==typeof e?E(e):e,n="number"==typeof n?E(n):n;var i=S.radToRot(o),a=E.add(e,S.times(i,E.fromRad(t,n))),l=E.add(e,S.times(i,E.fromRad(t+r,n))),u=E(r>Math.PI,r>0),s=E.str(a),c="".concat(E.str(n)," ").concat(b.radToAngle(o)," ").concat(E.str(u)," ").concat(E.str(l));return"M ".concat(s," A ").concat(c)}i('.Slider-module_uiSlider__YwhAE {\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  width: 100%;\n  min-height: var(--single-line-height-px);\n  background: rgba(255, 255, 255, 0.6);\n  border-radius: 1px; }\n  .Slider-module_uiSlider__YwhAE .Slider-module_uiSliderFlexContainer__fjv3E {\n    position: relative;\n    display: flex;\n    width: 100%;\n    padding: 0px 3px; }\n  .Slider-module_uiSlider__YwhAE label {\n    color: var(--label-color);\n    font-size: var(--label-size);\n    font-weight: var(--label-weight);\n    letter-spacing: var(--label-kerning);\n    padding: var(--label-padding-vertical) var(--label-padding-horizontal);\n    pointer-events: none; }\n  .Slider-module_uiSlider__YwhAE input[type="range"] {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    margin: 0px;\n    background-color: transparent;\n    /* reset */\n    -webkit-appearance: none;\n    appearance: none;\n    outline: none;\n    cursor: pointer; }\n    .Slider-module_uiSlider__YwhAE input[type="range"]::-webkit-slider-thumb {\n      width: 1px;\n      height: 10px;\n      background: rgba(0, 0, 0, 0);\n      -webkit-appearance: none;\n      appearance: none; }\n    .Slider-module_uiSlider__YwhAE input[type="range"]::-moz-range-thumb {\n      width: 1px;\n      height: 10px;\n      background: rgba(0, 0, 0, 0); }\n  .Slider-module_uiSlider__YwhAE .Slider-module_uiSliderValue__MMPpC {\n    color: var(--value-color);\n    font-size: var(--value-size);\n    font-weight: var(--value-weight);\n    letter-spacing: var(--value-kerning);\n    padding: var(--value-padding-vertical) var(--value-padding-horizontal);\n    text-align: right;\n    flex-grow: 1;\n    min-width: 15px;\n    margin-left: 5px;\n    pointer-events: none; }\n\n.Slider-module_uiSliderThumbReplacement__90u-6 {\n  --width: 0%;\n  position: absolute;\n  top: 1px;\n  bottom: 1px;\n  left: 1px;\n  width: calc(var(--width) - 2px);\n  margin: 0;\n  background: rgba(255, 255, 255, 0.8);\n  pointer-events: none;\n  transition: width 0.05s ease-in-out; }\n'),_.register("Slider",{uiSlider:"Slider-module_uiSlider__YwhAE",uiSliderFlexContainer:"Slider-module_uiSliderFlexContainer__fjv3E",uiSliderValue:"Slider-module_uiSliderValue__MMPpC",uiSliderThumbReplacement:"Slider-module_uiSliderThumbReplacement__90u-6"}),p.register(w,"slider",(function(e,t){var r=e,o=e.settings;return r.type="slider",r.settings=Array.isArray(o)?o:[o.min,o.max,o.step],r.value=Array.isArray(e.value)?e.value:[e.value],n.createElement(w,{key:r.label,o:r,onChange:t})})),function(e){e.radToAngle=function(e){return e/(2*Math.PI)*360},e.ev=function(e){return e?1:0}}(b||(b={})),E.add=function(e,n){return E(e.x+n.x,e.y+n.y)},E.times=function(e,n){return e.x*n.x+e.y*n.y},E.fromRad=function(e,n){return void 0===n&&(n=1),n="number"==typeof n?E(n):n,E(n.x*Math.cos(e),n.y*Math.sin(e))},E.str=function(e){return"".concat(e.x," ").concat(e.y)},S.times=function(e,n){return E(E.times(e.a,n),E.times(e.b,n))},S.radToRot=function(e){return S(E(Math.cos(e),-Math.sin(e)),E(Math.sin(e),Math.cos(e)))};var k="Knob-module_wrapper__tG1kL";i(".Knob-module_wrapper__tG1kL {\n  position: relative; }\n");var R={rulerWrapper:"Ruler-module_rulerWrapper__aOFAS",ruler:"Ruler-module_ruler__xykza",rulerInner:"Ruler-module_rulerInner__lMd1B",rulerIndicator:"Ruler-module_rulerIndicator__Yzc5F"};function A(e){var t=e.value,r=e.mms;e.scale;var o=e.show,i=void 0!==o&&o,a=n.useRef(null),l=n.useState(i?"block":"none"),u=l[0],s=l[1],c=n.useState(t);c[0];var p=c[1],d=n.useState(0);d[0];var f=d[1],m=n.useState([0,1,.01]);m[0];var v=m[1];return n.useEffect((function(){var e;p(t),v(r);var n,o=(t-(n=r)[0])/(n[1]-n[0]);f(o),s(i?"block":"none"),null===(e=a.current)||void 0===e||e.style.setProperty("--val","".concat(100*o,"%"))}),[t,r,i]),n.createElement("div",{className:R.rulerWrapper,ref:a,"data-show":u},n.createElement("div",{className:R.ruler},n.createElement("div",{className:R.rulerInner},n.createElement("div",{role:"unit","data-u":"0"}),n.createElement("div",{role:"unit","data-u":"0.25"}),n.createElement("div",{role:"unit","data-u":"0.5"}),n.createElement("div",{role:"unit","data-u":"0.75"}),n.createElement("div",{role:"unit","data-u":"1"}))),n.createElement("div",{className:R.rulerIndicator}))}function M(e){var t=e.o,r=e.onChange,o=n.useState(!1),i=o[0],a=o[1],l=n.useState(t.value[0]),u=l[0],s=l[1],c=n.useState(0),p=c[0],d=c[1],f=n.useState([0,1,.01]),m=f[0],v=f[1];n.useEffect((function(){var e;s(t.value[0]),v(t.settings),d((e=t.settings,(t.value[0]-e[0])/(e[1]-e[0])))}),[t]);var g=!1,h=function(e){if(!1===g)return g={x:e.clientX,y:e.clientY};var n,o=.005*(e.clientX-g.x)+-1e-4*Math.round(50*(e.clientY-g.y));n=p+o,n=Math.max(0,Math.min(1,n)),d(n),t.value[0]=n*(m[1]-m[0])+m[0],s(t.value[0]),r&&r(t)},_=function(e){e.preventDefault(),a(!1),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",_)},y=.5*Math.PI,b=1.94*Math.PI;return n.createElement("div",{className:k},n.createElement(A,{value:u,mms:m,scale:2,show:i}),n.createElement("svg",{width:"16",height:"14",onMouseDown:function(e){e.preventDefault(),a(!0),g=!1,document.addEventListener("mousemove",h),document.addEventListener("mouseup",_)}},n.createElement("path",{strokeWidth:"5.5",fill:"none",stroke:"#999",opacity:".8",d:C(8,3.5,0,b,y)}),n.createElement("path",{strokeWidth:"2.5",fill:"none",stroke:"#fff",d:C(8,3.2,0,b*p,y)})))}i('.Ruler-module_rulerWrapper__aOFAS {\n  position: absolute;\n  display: none;\n  bottom: calc(100% + 0px);\n  left: calc(50% - 50px);\n  width: 100px;\n  height: 20px;\n  --val:0%;\n  z-index: 10; }\n  .Ruler-module_rulerWrapper__aOFAS[data-show="block"] {\n    display: block; }\n    .Ruler-module_rulerWrapper__aOFAS[data-show="block"]:after {\n      content: "";\n      position: fixed;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      z-index: 100;\n      background-color: transparent;\n      cursor: none; }\n\n.Ruler-module_ruler__xykza {\n  position: absolute;\n  overflow: hidden;\n  mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent);\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  --ruler-scale: 2; }\n\n.Ruler-module_rulerInner__lMd1B {\n  position: absolute;\n  top: 3px;\n  left: calc(50% - var(--val) * var(--ruler-scale));\n  width: calc(100%  * var(--ruler-scale));\n  height: calc(100% - 6px);\n  background: rgba(255, 255, 255, 0.9);\n  display: flex;\n  justify-content: space-between;\n  border: 1px solid #000; }\n  .Ruler-module_rulerInner__lMd1B > [role="unit"] {\n    position: relative;\n    border-left: 1px solid #000;\n    margin-top: 10px; }\n    .Ruler-module_rulerInner__lMd1B > [role="unit"]::before {\n      content: attr(data-u);\n      position: absolute;\n      width: 20px;\n      left: -10px;\n      top: -9px;\n      font-size: 7px;\n      color: #000;\n      text-align: center; }\n    .Ruler-module_rulerInner__lMd1B > [role="unit"]:first-child::before {\n      left: 2px;\n      width: auto; }\n    .Ruler-module_rulerInner__lMd1B > [role="unit"]:last-child::before {\n      left: auto;\n      right: 2px;\n      width: auto; }\n\n.Ruler-module_rulerIndicator__Yzc5F {\n  position: absolute;\n  top: 0;\n  left: 50%;\n  width: 1px;\n  height: 100%;\n  background: #000; }\n  .Ruler-module_rulerIndicator__Yzc5F:before {\n    content: "";\n    position: absolute;\n    top: -3px;\n    left: -3px;\n    width: 0px;\n    height: 0px;\n    border-top: 6px solid #000;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent; }\n  .Ruler-module_rulerIndicator__Yzc5F:after {\n    content: "";\n    position: absolute;\n    bottom: -3px;\n    left: -3px;\n    width: 0px;\n    height: 0px;\n    border-bottom: 6px solid #000;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent; }\n'),p.register(M,"knob",(function(e,t){var r=e,o=e.settings;return r.type="knob",r.settings=Array.isArray(o)?o:[o.min,o.max,o.step],r.value=Array.isArray(e.value)?e.value:[e.value],n.createElement(M,{key:r.label,o:r,onChange:t})}));var N={uiColorRamp:"ColorRamp-module_uiColorRamp__5X4DB",uiColorRampComps:"ColorRamp-module_uiColorRampComps__NWf5y",uiColorRampPreview:"ColorRamp-module_uiColorRampPreview__Cg1Gy"};i('.ColorRamp-module_uiColorRamp__5X4DB {\n  display: inline-flex;\n  flex-flow: column;\n  align-items: end;\n  position: relative;\n  min-width: 100px; }\n  .ColorRamp-module_uiColorRamp__5X4DB [role="handle"] {\n    width: 9px;\n    height: 9px;\n    border-color: rgba(255, 255, 255, 0.5);\n    border-radius: 50%;\n    font-size: 8px;\n    color: #fff;\n    font-weight: 700; }\n    .ColorRamp-module_uiColorRamp__5X4DB [role="handle"][data-key="r"] {\n      background-color: #b00; }\n    .ColorRamp-module_uiColorRamp__5X4DB [role="handle"][data-key="g"] {\n      background-color: #0b0; }\n    .ColorRamp-module_uiColorRamp__5X4DB [role="handle"][data-key="b"] {\n      background-color: #00b; }\n\n.ColorRamp-module_uiColorRampComps__NWf5y {\n  display: inline-flex;\n  flex-flow: column;\n  align-items: end;\n  margin: 0;\n  padding: 0; }\n  .ColorRamp-module_uiColorRampComps__NWf5y > li {\n    display: flex;\n    line-height: 0.8em;\n    align-items: center; }\n\n.ColorRamp-module_uiColorRampPreview__Cg1Gy {\n  width: calc(100% - 2px);\n  height: 100px;\n  position: relative;\n  margin: 0px 2px 3px; }\n');var L="styles-module_xy__C6Hn7",P="styles-module_backgroundWrapper__s6I8d",z="styles-module_defaultBackground__H4M4T",I="styles-module_handlesWrapper__vkSu9",U="styles-module_handle__ZWM1Z";i(".styles-module_xy__C6Hn7 {\n  position: relative;\n  width: 100%;\n  min-width: 50px;\n  min-height: 50px; }\n  .styles-module_xy__C6Hn7 .styles-module_backgroundWrapper__s6I8d .styles-module_defaultBackground__H4M4T {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(255, 255, 255, 0.6); }\n  .styles-module_xy__C6Hn7 .styles-module_backgroundWrapper__s6I8d canvas {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0; }\n  .styles-module_xy__C6Hn7 .styles-module_handlesWrapper__vkSu9 {\n    position: absolute;\n    width: 100%;\n    height: 100%; }\n\n.styles-module_handle__ZWM1Z {\n  cursor: grab;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 5px;\n  height: 5px;\n  left: 0;\n  top: 0;\n  border: 1px solid #000;\n  background: rgba(0, 0, 0, 0);\n  font-size: 7px;\n  color: #fff; }\n");var B=function(e,n){return 1*e.toFixed(n)},D=function(e,n,t){return void 0===n&&(n=0),void 0===t&&(t=1),Math.min(Math.max(e,n),t)},F=function(){function e(e,n,t){var r;this.min=e,this.max=n,this.step=t,this.range=n-e,this.stepDigits=(r=t,Math.floor(r)===r?0:r.toString().split(".")[1].length||0)}return e.fromArray=function(n){return new e(n[0],n[1],n[2])},e.prototype.filter=function(e){var n=(e=D(e,this.min,this.max))%this.step;return n=this.step-Math.abs(n)<1e-9?0:n,B(e-n,this.stepDigits)},e.prototype.normalize=function(e){return e=this.filter(e),B((e-this.min)/this.range,this.stepDigits)},e.prototype.denormalize=function(e){return e=this.range*D(e)+this.min,e=this.filter(e),B(e,this.stepDigits)},e}();function T(e){return{x:F.fromArray(e.x),y:F.fromArray(e.y)}}var O=n.createElement("div",{className:z});function Y(e){var t=e.children,r=e.background,o=void 0===r?O:r;return n.createElement("div",{className:L},n.createElement("div",{className:P},o),n.createElement("div",{className:I},t))}var j=function(e,n){n||(n=e.parentElement);var t=n.getBoundingClientRect(),r=e.getBoundingClientRect();return{w:t.width-r.width,h:t.height-r.height,eB:r,cB:t}},G=function(e,n){e.style.left="".concat(n.x,"px"),e.style.top="".concat(n.y,"px")};var H=function(e,n){var t=function(e,t,r){t.preventDefault();var o=function(e,n){var t=function(e){var n=e.getBoundingClientRect();return{t:n.top,l:n.left,b:n.bottom,r:n.right,w:n.width,h:n.height}}(e),r=t.t,o=t.l,i=t.b,a=t.r,l=t.w,u=t.h;return Object.assign({t:r,l:o,b:i,r:a,w:l,h:u},{pos:{x:n.x-o,y:n.y-r},ori:n})}(e,{x:t.clientX,y:t.clientY});n[r]&&n[r](o),n.all&&n.all(o,r)},r=function(r){(n.dragging||n.all)&&t(e,r,"dragging")},o=function(i){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",o),(n.released||n.all)&&t(e,i,"released")};e.onmousedown=function(i){document.addEventListener("mousemove",r),document.addEventListener("mouseup",o),(n.pressed||n.all)&&t(e,i,"pressed")}};function W(e,n,t,r){if(null!==t){var o=j(t),i=function(e,n,t){var r=[n.x.normalize(e[0]),n.y.normalize(e[1])];return[t.flipX?1-r[0]:r[0],t.flipY?1-r[1]:r[1]]}(e,n,r);G(t,{x:i[0]*o.w,y:i[1]*o.h})}}function X(e){var t=e.value,o=e.stepCtrls,i=e.onChange,a=e.options,l=r({id:"default",label:"",flipY:!0,flipX:!1},a||{}),s=n.useRef(null);return n.useEffect((function(){W(t,o,s.current,l)}),[t,l,o]),n.useEffect((function(){var e,n,r;null!==s.current&&(e=s.current,n={dontSetPos:!0,all:function(e){var n=e.normalized,r=function(e,n,t){return e[0]=n.x.denormalize(t.flipX?1-e[0]:e[0]),e[1]=n.y.denormalize(t.flipY?1-e[1]:e[1]),e}([n.x,n.y],o,l);t[0]=r[0],t[1]=r[1],W(t,o,s.current,l),i&&i(l.id,t)}},r=e.parentElement,H(e,{all:function(t,o){"pressed"===o?u.setRole("dragging"):"released"===o&&u.resetRole();var i=t.w,a=t.h;n.elementCenter||(n.elementCenter={x:i/2,y:a/2});var l=j(e,r),s=t.ori.x-l.cB.left-n.elementCenter.x,c=t.ori.y-l.cB.top-n.elementCenter.y,p=t;p.normalized={x:D(s/l.w),y:D(c/l.h)},p.constrained={x:p.normalized.x*l.w,y:p.normalized.y*l.h},n.dontSetPos||G(e,p.constrained),n[o]&&n[o](p),n.all&&n.all(p,o)}}))}),[s,o,t,i,l]),n.createElement("div",{ref:s,className:U,"data-key":l.id,role:"handle"},l.label)}var V,Z=function(e){};function $(e){var r=e.onUniformsUpdate,o=void 0===r?Z:r,i=e.fragShaderCode,a=void 0===i?"#version 300 es\nprecision highp float;\nout vec4 fragColor;\nuniform vec2 u_resolution;\nvoid main(){fragColor = vec4(vec3(0.),1.);}":i,l=e.options,u=void 0===l?{autoPlay:!0}:l,s=n.useRef(null),c=function(){function e(e){this.cb=e,this._glsl=null,this.updater=e}return e.prototype.updateUniforms=function(e){this.updater(e)},Object.defineProperty(e.prototype,"glsl",{get:function(){return this._glsl},set:function(e){this._glsl=e},enumerable:!1,configurable:!0}),e}(),p=n.useState(new c(o))[0];return n.useEffect((function(){void 0!==u.autoPlay&&("callbacks"in u||(u.callbacks={}),u.callbacks&&(u.callbacks.refresh=function(){var e;return null===(e=p.glsl)||void 0===e?void 0:e.drawFrame()})),!p.glsl&&s.current&&(p.glsl=t.init2D(s.current).addFragmentShaderMiddleware(p).setShaderSource("fragment",a),void 0===u.autoPlay||u.autoPlay?p.glsl.play():p.glsl.drawFrame())}),[s,p,a,u]),n.createElement("canvas",{ref:s})}!function(e){e.Pad=Y,e.Handle=X,(e.Canvas||(e.Canvas={})).Bckgd=$,e.processSettings=function(e){return Array.isArray(e)?{x:e.slice(0,3),y:e.slice(3)}:e},(e.Step||(e.Step={})).getCtrlsFromArray=T}(V||(V={}));var J="#version 300 es\nprecision mediump float;\nfloat MPI2 = 6.2831853;\nout vec4 fragColor;\nuniform vec2 u_resolution;\nuniform float[6] c;\nvoid main(){\n  float x = gl_FragCoord.x/u_resolution.x;\n  vec3 cp = vec3(c[0],c[1],c[2]);\n  vec3 ci = vec3(c[3],c[4],c[5]);\n  vec3 c = (cos((x+(1.-cp))*MPI2)*.5+.5) * ci;\n  fragColor = vec4(c ,1.);\n}";function K(e){var t=e.o,r=e.onChange,o=n.useRef(null),i=n.useState(t.value),a=i[0],l=i[1],u=[0,1,.01],s=V.Step.getCtrlsFromArray({x:u,y:u}),c={autoPlay:!1};function p(e){var n="rgb".indexOf(e);return-1===n?[0,0]:[a[n],a[n+3]]}function d(e,n){var o;!function(e,n){var t="rgb".indexOf(e);-1!==t&&(a[t]=n[0],a[t+3]=n[1],l(a))}(e,n),t.value=a,r&&r(t),(null===(o=c.callbacks)||void 0===o?void 0:o.refresh)&&c.callbacks.refresh()}return n.createElement("div",{ref:o,className:N.uiColorRamp},n.createElement(V.Pad,{className:N.cr_pad,background:n.createElement(V.Canvas.Bckgd,{fragShaderCode:J,onUniformsUpdate:function(e){a&&e.map((function(e){return e.value="c"===e.name?a:e.value,e}))},options:c})},n.createElement(V.Handle,{options:{id:"r",label:"R"},value:p("r"),stepCtrls:s,onChange:d}),n.createElement(V.Handle,{options:{id:"g",label:"G"},value:p("g"),stepCtrls:s,onChange:d}),n.createElement(V.Handle,{options:{id:"b",label:"B"},value:p("b"),stepCtrls:s,onChange:d})))}p.register(K,"color_ramp",(function(e,t){return n.createElement(K,{key:e.label,o:e,onChange:t})}));var Q={wrapper:"Point-module_wrapper__5ujTI",xy:"Point-module_xy__e-suP"};function q(e){var t=e.o,r=e.onChange,i=n.useState(t.value),a=i[0],l=i[1],u=n.useState(t.settings),s=u[0],c=u[1],p=V.Step.getCtrlsFromArray(t.settings);function d(e){t.value["XY".indexOf(e.label)]=e.value[0],l(o([],t.value,!0)),r&&r(t)}function f(e){var n="XY"[e],t=n.toLocaleLowerCase();return{label:n,value:[a[e]],settings:s[t]}}return n.useEffect((function(){l(t.value),c(t.settings)}),[t]),n.createElement("div",{rel:"panel",className:Q.wrapper},n.createElement("label",null,t.label,n.createElement("span",null," ")),n.createElement(g,null,n.createElement(V.Pad,{className:Q.xy},n.createElement(V.Handle,{value:a,stepCtrls:p,onChange:function(e,n){t.value[0]=n[0],t.value[1]=n[1],l(o([],t.value,!0)),r&&r(t)}})),n.createElement(w,{o:f(0),onChange:d}),n.createElement(w,{o:f(1),onChange:d})),n.createElement("input",{type:"hidden",name:t.label,value:a.toString()}))}i(".Point-module_wrapper__5ujTI > label {\n  display: flex;\n  font-size: 7px;\n  margin: 0;\n  text-transform: uppercase;\n  pointer-events: none;\n  color: #fff; }\n  .Point-module_wrapper__5ujTI > label > span {\n    display: inline-block;\n    background: #ccc;\n    flex-grow: 1;\n    height: 1px;\n    margin-top: 5px;\n    margin-left: 5px; }\n\n.Point-module_xy__e-suP {\n  height: 100px; }\n"),p.register(q,"point",(function(e,t){var r;return e.settings=(r=e.settings,Array.isArray(r)?{x:r.slice(0,3),y:r.slice(3)}:r),n.createElement(q,{key:e.label,o:e,onChange:t})}));var ee={uiSine:"Sine-module_uiSine__eM78m"};i('.Sine-module_uiSine__eM78m {\n  display: inline-flex;\n  flex-flow: column;\n  align-items: end;\n  position: relative; }\n  .Sine-module_uiSine__eM78m [role="handle"] {\n    width: 10px;\n    height: 10px;\n    border-color: #fff; }\n');var ne="#version 300 es\nprecision highp float;\nfloat MPI2 = 6.2831853;\nout vec4 fragColor;\nuniform vec2 u_resolution;\nuniform float[2] c;\nint yAt(int x, float hy){\n  float nx = float(x) / u_resolution.x;\n  float y = sin(nx * c[0] * MPI2) * c[1];\n  return int(y * hy + hy);\n}\nvoid main(){\n  float hy = u_resolution.y * .5;\n  int x = int(gl_FragCoord.x);\n  int y = int(gl_FragCoord.y);\n  int dy = yAt(x, hy);\n  int pdy = yAt(x-1, hy);\n  float d = min(dy, pdy) <= y && y <= max(dy, pdy) ? 1. : 0.;\n  fragColor = vec4(vec3(d),1.);\n}";function te(e){var t=e.o,r=e.onChange,i=n.useRef(null),a=n.useState(t.value),l=a[0],u=a[1],s=V.Step.getCtrlsFromArray(t.settings),c={autoPlay:!1};var p=n.createElement(V.Canvas.Bckgd,{fragShaderCode:ne,onUniformsUpdate:function(e){l&&e.map((function(e){return e.value="c"===e.name?l:e.value,e}))},options:c});return n.createElement("div",{ref:i,className:ee.uiSine},n.createElement(V.Pad,{background:p},n.createElement(V.Handle,{value:l,stepCtrls:s,onChange:function(e,n){var i;t.value[0]=n[0],t.value[1]=n[1],u(o([],t.value,!0)),r&&r(t),(null===(i=c.callbacks)||void 0===i?void 0:i.refresh)&&c.callbacks.refresh()},options:{flipX:!0}})))}p.register(te,"sine",(function(e,t){var r;return e.settings=(r=e.settings,Array.isArray(r)?{x:r.slice(0,3),y:r.slice(3)}:r),n.createElement(te,{key:e.label,o:e,onChange:t})}));function re(e){var t=e.o,r=e.onChange,o=n.useRef(null),i=n.useState(t.value[0]),a=i[0],l=i[1];var u=_.of("Select");return n.createElement("div",{className:u.uiSelect},n.createElement("label",{htmlFor:t.label},t.label),n.createElement("select",{ref:o,defaultValue:a,onChange:function(e){var n=e.target.value;t.value[0]=n,l(n),r&&r(t)}},Object.entries(t.settings).map((function(e){var t=e[0],r=e[1];return n.createElement("option",{key:t,value:t},r)}))))}i(".Select-module_uiSelect__uMMyH {\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  width: 100%;\n  min-height: var(--single-line-height-px);\n  border-radius: 1px; }\n  .Select-module_uiSelect__uMMyH label {\n    font-size: 8px;\n    letter-spacing: -0.04em;\n    z-index: 1;\n    padding: 0px;\n    pointer-events: none;\n    color: #fff; }\n  .Select-module_uiSelect__uMMyH select {\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    outline: none;\n    text-indent: 1px;\n    background: #fff;\n    border: none;\n    font-size: 9px;\n    padding: 2px 4px;\n    margin-left: 4px;\n    border-radius: 0 !important; }\n    .Select-module_uiSelect__uMMyH select:focus {\n      outline: none;\n      border: none !important; }\n"),_.register("Select",{uiSelect:"Select-module_uiSelect__uMMyH"}),p.register(re,"select",(function(e,t){var r=e,o=e.settings;return r.type="select",Array.isArray(o)&&(r.settings={},o.forEach((function(e,n){r.settings[n]=e}))),r.value=Array.isArray(e.value)?e.value:["".concat(e.value)],n.createElement(re,{key:r.label,o:r,onChange:t})}));var oe,ie,ae,le,ue,se="styles-module_container__gistR",ce="styles-module_glsl_canvas__GR1pD";function pe(e){var n=ie.process(e),t=n.comments,r=n.code;r=(r=r.replace(/#if[\s\S]*?#endif/g,oe.ReplaceAllButNLs)).replace(/#\w?.*/g,oe.ReplaceAllButNLs);var o=ue.parseDefinition(r),i=le.parse(r),a=function(e){return e.content.indexOf("@uiui")>=0},l=function(e,n){return ie.findS(t,e,n,a)||ie.findL(t,e-1,n,a)||void 0};function u(e){if("uiuiInstruction"in e)return e;if("pos"in e)e.uiuiInstruction=l(e.pos.s.row,e.pos.e.row);else{console.log("HERE");var n=e,t=ue.withName(o,n.type);t.uiui&&(n.uiuiInstruction=t.uiui)}return e.args&&e.args.forEach((function(e){"string"!=typeof e&&"subtype"in e&&u(e)})),e}o.forEach((function(e){e.uiui=l(e.pos.s.row,e.content.pos.s.row),e.properties.forEach((function(e){e.uiui=l(e.pos.s.row,e.pos.e.row)}))})),i.forEach((function(e){e.uiuiInstruction=l(e.pos.s.row,e.pos.e.row)}));var s=[];return o.forEach((function(e){ue.parseDeclarations(r,e,o).forEach((function(e){return s.push(u(e))}))})),{code:r,structs:s,vars:i,comments:t}}function de(e){var n=/@uiui:panel\s*(?<name>.+?)\s*((?<flow>[V|>])\s*)?(\[\s*(?<children>.*)\s*\])?$/m.exec(e);if(n&&n.groups){var t=">"===n.groups.flow?"row":"col";return{type:"panel",label:n.groups.name,settings:{flow:t},children:n.groups.children?n.groups.children.replace(/\s/g,"").split(","):[],value:[]}}}function fe(e,n){var t=function(e){var n={};return ie.eachM(e,(function(e){if(/@uiui/.test(e.content))for(var t=/(@uiui:panel.*)\n/g,r=void 0;r=t.exec(e.content);){var o=de(r[1]);o&&(n[o.label]=o)}})),n}(e);Object.keys(n).forEach((function(e){"panel"===n[e].type&&(t[e]=n[e],delete n[e])}));var r=function(e){e&&"children"in e&&((e.children||[]).forEach((function(o){if(o in t){var i=t[o];delete t[o],e.value.push(i),r(i)}else o in n&&e.value.push(n[o])})),delete e.children)};return Object.keys(t).forEach((function(e){r(t[e])})),Object.keys(t).map((function(e){return t[e]}))}function me(e,n){var t="",r=[],o=[],i=[];if(e.uiuiInstruction&&(n.push(e),e.args&&e.args.forEach((function(e){if("string"==typeof e)o.push(e);else if(o.push(e.name),"int"===e.type||"float"===e.type||"uint"===e.type){var t=e.type+(e.size>1?"[".concat(e.size,"]"):"");r.unshift("uniform ".concat(t," ").concat(e.name,";")),i.push({type:e.type,name:e.name,size:e.size}),n.push(e)}else{var a=me(e,n);a.uniforms.length>0&&i.push.apply(i,a.uniforms),a.code&&r.push(a.code+"\n")}})),r.length>0)){var a=r.join("\n"),l=o.join(",");t="".concat(a,"\n").concat(e.type," ").concat(e.name," = ").concat(e.type,"(").concat(l,");")}return{code:t,uniforms:i}}function ve(e){var n=pe(e),t={},o=[],i=[];n.structs.forEach((function(e){var t=me(e,n.vars);t.code&&i.push({start:e.pos.s.off,end:e.pos.e.off,text:t.code}),t.uniforms.length>0&&o.push.apply(o,t.uniforms)})),n.vars.forEach((function(e){if(function(e){if(e.uiuiInstruction){var n=/\s*@uiui:(?<type>\w*)\s*(?<label>.*?)\s*\(\s*(?<args>.*)\s*\)/.exec(e.uiuiInstruction);if(n&&n.groups){e.uiui={type:n.groups.type,label:n.groups.label,args:n.groups.args.replace(/\s/g,"").split(","),value:[]};var t=e.type+(e.size>1?"[".concat(e.size,"]"):"");e.replacement="uniform ".concat(t," ").concat(e.name,";")}else if(e.uiuiInstruction){var r=de(e.uiuiInstruction);r&&(e.uiui=r)}}}(e),e.uiui){if("panel"===e.uiui.type){e.uiui.value=[];var n=[];e.args&&e.args.forEach((function(e){"object"==typeof e&&n.push(e.name)})),e.uiui.children=n}else Array.isArray(e.value)?e.uiui.value=e.value.map((function(e){if(e.type===ae.TYPE.NUMBER)return Number(e.value);throw new Error("cannot have this value (".concat(e.value,") inside a var to be transformed into a uiui"))})):e.uiui.value=Number(e.value),e.uiui.settings=(e.uiui.args||[]).map((function(e){return Number(e)}));t[e.name]=r({id:e.name},e.uiui)}e.replacement&&"pos"in e&&(o.push({type:e.type,name:e.name,size:e.size}),i.push({start:e.pos.s.off,end:e.pos.e.off,text:e.replacement}))}));var a=e;return i.sort((function(e,n){return n.start-e.start})).forEach((function(e){a=oe.replace(a,e)})),{uiui:fe(n.comments,t),code:a,uniforms:o}}i(".styles-module_container__gistR {\n  display: flex;\n\n}\n.styles-module_glsl_canvas__GR1pD {\n  width: 100%;\n  height: 100%;\n  position: absolute\n}\n"),function(e){e.Height=function(e){return(e.match(/\n/g)||[]).length},e.HeightAt=function(n,t){return e.Height(n.substring(0,t))},e.Splice=function(e,n,t,r){return e.substring(0,n)+r+e.substring(n+t)},e.replace=function(n,t){return e.Splice(n,t.start,t.end-t.start,t.text)},e.FirstMatch=function(e,n){var t=null,r="";for(var o in n){var i=n[o].exec(e);i&&i.index>=0&&(!t||i.index<t.index)&&(t=i,r=o)}return""!==r&&{res:t,key:r}},e.ReplaceAllButNLs=function(e){return e.replace(/[^\n]/g," ")},e.Location=function(n,t,r){void 0===r&&(r={off:0,row:0});var o=function(e,n,t){return{off:e+t.off,row:n+t.row}},i=o(n.length,e.Height(n),r);return{s:i,e:o(t.length,e.Height(t),i)}},e.isNumber=function(e){return null===/[^\d|.]/.exec(e)},e.splitArgs=function(e){for(var n=e.replace(/[\s|\n]/g,"").split(","),t=function(e){return(e.match(/\)/g)||[]).length},r=0;r<n.length;r++)for(;(n[r].match(/\(/g)||[]).length>t(n[r])&&r<n.length;)n[r]+=","+n[r+1],n.splice(r+1,1);return n},e.whileMatches=function(e,n,t){var r;if(!n.global)throw new Error("WhileMatches can only be ran with global Regexes");for(;r=n.exec(e);)t(r)}}(oe||(oe={})),function(e){e.L="L",e.S="S",e.M="M",e.process=function(e){for(var n,t=[],r={L:/^\s*\/\/[/|\s]*(.*)$/m,S:/(?<=^[^\n]*\w.?[^\n]*)\/\/[/|\s]*(.*)$/m,M:/\/\*\**(.*?)\**\*\//ms};n=oe.FirstMatch(e,r);){var o=n.res;t.push({type:n.key,pos:oe.Location(e.substring(0,o.index),o[0]),content:o[1],raw:o[0]}),e=oe.Splice(e,o.index,o[0].length,oe.ReplaceAllButNLs(o[0]))}return{comments:t,code:e}},e.find=function(e,n,t,r,o){var i=n.find((function(n){var i=n.type===e&&n.pos.e.row>=t&&n.pos.e.row<=r;return i&&o&&(i=o(n)),i}));return!!i&&i.content},e.findL=function(n,t,r,o){return e.find(e.L,n,t,r,o)},e.findS=function(n,t,r,o){return e.find(e.S,n,t,r,o)},e.findM=function(n,t,r,o){return e.find(e.M,n,t,r,o)},e.eachM=function(n,t){return n.forEach((function(n){return n.type===e.M&&t(n)}))}}(ie||(ie={})),function(e){var n;!function(e){e[e.NUMBER=0]="NUMBER",e[e.ID=1]="ID",e[e.FNCALL=2]="FNCALL",e[e.COMPLEX=3]="COMPLEX"}(n=e.TYPE||(e.TYPE={})),e.parse=function(e){for(var t,r=/(?<fn>[\w]*)[\s|n]*\((?<ctt>[^(|)]*)\)/,o=[],i=function(e){var t;if(t=/(?<fn>[\w]*)[\s|n]*\((?<ctt>[^(|)]*)\)/.exec(e)){if(t.groups)return{type:n.FNCALL,value:e,keyword:t.groups.fn};throw new Error("what' wrong...")}if(!/[^\d|\s|\n|.|-]/.exec(e))return{type:n.NUMBER,value:e};if(t=/^[\s|\n]*:\$:(?<id>\d*):\$:[\s|\n]*$/.exec(e)){if(t.groups)return parseInt(t.groups.id);throw new Error("what' wrong here...")}if(t=/^[\s|\n]*(?<kw>[a-zA-Z_]\w*)[\s|\n]*$/.exec(e)){if(t.groups)return{type:n.ID,value:e,keyword:t.groups.kw};throw new Error("what' wrong here as well...")}return{type:n.COMPLEX,value:e}},a=function(e){for(var n,t=/:\$:(?<id>\d*):\$:/;n=t.exec(e);){if(!n.groups)throw new Error("no way...");var r=Number(n.groups.id),i=a(o[r].value);e=oe.Splice(e,n.index,n[0].length,i)}return e};t=r.exec(e);){if(!t.groups)throw new Error("wtf");var l=o.length;if(t.groups.fn)o.push(i(t[0]));else{var u=i(t.groups.ctt);"object"==typeof u?o.push(u):l=u}e=oe.Splice(e,t.index,t[0].length,":$:".concat(l,":$:"))}var s=e.split(",").map((function(e){var n=i(e),t="object"==typeof n?n:o[n];return t.value=a(t.value),t}));return s}}(ae||(ae={})),function(e){var n;!function(e){e.isNumber=function(e){return["float","int","uint"].indexOf(e)>=0},e.isVec=function(e){return["vec2","vec3"].indexOf(e)>=0},e.isBool=function(e){return["bool"].indexOf(e)>=0},e.assert=function(n){if(!e.isNumber(n)&&!e.isVec(n)&&!e.isBool(n))throw new Error("Invalid type: "+n);return e.isNumber(n)?"number":e.isVec(n)?"vec":e.isBool(n)?"bool":"never"}}(n=e.Type||(e.Type={})),e.find=function(e,n){return n.find((function(n){return n.name===e}))},e.parse=function(e){for(var t,r=/\b(?<type>float|int|uint|vec2|vec3)[\s|\n]+(?<name>.*?)[\s|\n]*(\[(?<dim>\d+)\])?[\s|\n]*=[\s|\n]?(?<value>.*)[\s|\n]?;/g,o=[];t=r.exec(e);){if(!t.groups)throw new Error("oh no!!");var i=t.groups,a=i.type,l=i.name,u=i.value,s=i.dim,c=u;if(["vec2","vec3"].indexOf(a)>=0){var p=+a.substring(3,4);if(!(d=/\((.*)\)/.exec(u)))throw new Error("Unparsable Var");c=ae.parse(d[1]),o.push({name:l,type:a,size:p,value:c,subtype:"vec",pos:oe.Location(e.substring(0,t.index),t[0])})}else{if((p=+(null!=s?s:"1"))>1){var d;if(!(d=/\((.*)\)/.exec(u)))throw new Error("Unparsable Var");c=ae.parse(d[1])}o.push({type:a,name:l,value:c,size:p,subtype:n.assert(a),pos:oe.Location(e.substring(0,t.index),t[0])})}}return o}}(le||(le={})),function(e){e.parseDefinition=function(e){for(var n,t,r=/\b(struct\b[\s|\n]*(\w*)[\s|\n]*{)(.*?)}/gs,o=/(\w*)[\s|\n]*(\w*)[\s|\n]*;/gs,i=[];(n=r.exec(e))&&n[0].length>0;){var a=oe.Location(e.substring(0,n.index),n[0]),l={name:n[2],content:{value:n[3],pos:oe.Location(n[1],n[3],a.s)},pos:a,properties:[]};for(i.push(l);(t=o.exec(l.content.value))&&t[0].length>1;){var u=l.content.value.substring(0,t.index);l.properties.push({type:t[1],name:t[2],size:1,pos:oe.Location(u,t[0],l.content.pos.s)})}}return i},e.withName=function(e,n){var t=e.find((function(e){return e.name===n}));if(!t)throw new Error("Struct not found: "+n);return t},e.parseValue=function(n,t,r,o){var i=e.withName(o,t),a=new RegExp("^[\\s|\\n]*".concat(i.name,"[\\s|\\n]*\\((.*)\\)"),"sm").exec(n);if(!a)throw new Error("Error Parsing Struct content for: ".concat(i.name));var l=oe.splitArgs(a[1]),u=[];return i.properties.forEach((function(n,t){var a=l[t];if(!n.uiui||n.uiui.indexOf("@uiui")<0)u.push(a);else{var s="".concat(r,"_").concat(n.name);if(le.Type.isNumber(n.type))oe.isNumber(a)?u.push({name:s,value:a,subtype:"number",type:n.type,size:n.size,uiuiInstruction:n.uiui,pos:n.pos}):u.push(a);else if(le.Type.isVec(n.type))u.push(a);else{if(!/^(\w*)\(.*\)$/.exec(a))throw new Error("Error Parsing Struct content for: "+i.name);var c=e.parseValue(a,n.type,s,o);u.push(c)}}})),{type:i.name,subtype:"struct",name:r,value:n,args:u}},e.parseDeclarations=function(n,t,r){for(var o,i=[],a=t.name,l="[\\n|\\s]*",u=new RegExp("\\b"+a+"\\b"+l+"?(\\w*)"+l+"=("+l+a+"\\(.*?\\);)","gs");o=u.exec(n);){var s=e.parseValue(o[2],t.name,o[1],r);s.pos=oe.Location(n.substring(0,o.index),o[0]),i.push(s)}return i}}(ue||(ue={}));var ge,he=function(){function e(){this.init=!1}return e.prototype.updateUniforms=function(e){var n=this;this.keys&&e.forEach((function(e){e.name in n.keys&&(e.value=n.keys[e.name].value)}))},e.prototype.setData=function(e){var n={};!function e(t){t.forEach((function(t){"panel"===t.type?e(t.value):n[t.id]=t}))}(e.uiui),this.keys=n},e}();function _e(e){var r=e.code,o=e.url,i=e.postProcessData,a=n.useState(r),l=a[0],u=a[1],s=n.useState(o)[0],c=n.useState(null),p=c[0],d=c[1],m=n.useRef(null),v=n.useState(new he)[0];return n.useEffect((function(){s&&fetch(s).then((function(e){return e.text()})).then((function(e){return u(e)}))}),[s]),n.useEffect((function(){if(!v.init&&m.current&&l){var e=ve(l);console.log(e.uiui),i&&i(e),v.setData(e),d(f.withData(e.uiui)),t.init2D(m.current).addFragmentShaderMiddleware(v).setShaderSource("fragment",e.code).play(),v.init=!0}}),[m,l,v,i]),n.createElement("div",{className:se},n.createElement("canvas",{ref:m,className:ce}),p)}p.enable([h,w,M,K,q,te,re]),function(e){var n;e.Root=f,e.Canvas=_e,e.Config=p,e.Styles=_,(n=e.Lib||(e.Lib={})).enable=p.enable,n.Group=g,n.Panel=h,n.Slider=w,n.Knob=M,n.ColorRamp=K,n.Point=q,n.Sine=te,n.Select=re}(ge||(ge={}));export{ge as UiUi};
//# sourceMappingURL=index.es.js.map
