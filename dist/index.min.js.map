{"version":3,"file":"index.min.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/ui/utils/GlobalLayer.tsx","../src/config.tsx","../src/RootElem.tsx","../src/ui/Group.tsx","../src/ui/Panel.tsx","../src/styles.ts","../src/utils/vec.ts","../src/ui/Slider.tsx","../src/utils/svg.ts","../src/ui/Ruler.tsx","../src/ui/Knob.tsx","../src/utils/numbers.ts","../src/ui/utils/xy/XYPad.tsx","../src/utils/dom.ts","../src/action/delegate.ts","../src/ui/utils/xy/XYHandle.tsx","../src/ui/utils/xy/XYPadCanvasBackground.tsx","../src/ui/utils/XY.ts","../src/ui/ColorRamp.tsx","../src/ui/Point.tsx","../src/ui/Sine.tsx","../src/ui/Select.tsx","../src/utils/glue/str.ts","../src/utils/glue/comment.ts","../src/utils/glue/args.ts","../src/utils/glue/var.ts","../src/utils/glue/struct.ts","../src/utils/glue/processor.ts","../src/utils/Canvas.tsx","../src/index.ts"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import * as React from 'react';\nimport styles from './GlobalLayer.module.scss';\nlet _singleton: HTMLElement | null = null;\n\nexport namespace UtilLayer {\n  export function getSingleton() {\n    return _singleton;\n  }\n  export function setRole(role: string) {\n    if (_singleton === null) return;\n    _singleton.setAttribute('role', role);\n  }\n\n  export function resetRole() {\n    if (_singleton === null) return;\n    _singleton.setAttribute('role', '');\n  }\n}\n\nexport function UiUiUtilLayer() {\n  const ref = React.useRef<HTMLDivElement>(null);\n  React.useEffect(() => {\n    _singleton = ref.current;\n  }, [ref]);\n  return <div ref={ref} className={styles.utilLayer}></div>;\n}\n","type ConstructorArgs<O> = {\n  o: O;\n  onChange?: (o: O) => void;\n};\ntype ElemConstructor<O = any> = (a: ConstructorArgs<O>) => JSX.Element;\ntype ElemBuilder = (a: any, onChange?: (o: any) => void) => JSX.Element;\n\ntype ElemRegistryEntry<O> = {\n  cfgKey: string;\n  elem: ElemConstructor<O>;\n  builder: ElemBuilder;\n  enabled: boolean;\n};\ntype ElemRegistry = {\n  [key: string]: ElemRegistryEntry<any>;\n};\n\nconst registry: ElemRegistry = {};\n\nexport namespace Config {\n  export type Obj<T, S, V> = {\n    type?: T;\n    label: string;\n    settings: S;\n    value: V;\n  };\n  export type Args<O> = {\n    o: O;\n    onChange?: (o: O) => void;\n  };\n  export type Alt<A, B> = {\n    [K in keyof A]: K extends keyof B ? A[K] | B[K] : A[K];\n  };\n  export type AltArgs<A, B> = Args<Alt<A, B>>;\n  export type Elem = {\n    type: string;\n    label: string;\n    settings: any;\n    value: any;\n  };\n  export type Json = Elem[];\n  export type ProcessorInfo = {\n    elements: {\n      [key: string]: {\n        type: string;\n        label: string;\n        args: any;\n      };\n    };\n    panels: {\n      [key: string]: {\n        label: string;\n        orientation: string;\n        children: string[];\n      };\n    };\n    source: string;\n  };\n  export function register<O>(\n    e: ElemConstructor<O>,\n    k: string,\n    b: ElemBuilder\n  ) {\n    registry[e.name] = {\n      cfgKey: k,\n      elem: e,\n      builder: b,\n      enabled: false,\n    };\n    return registry;\n  }\n  export const enable = (e: ElemConstructor | ElemConstructor[]) => {\n    if (!Array.isArray(e)) e = [e];\n    e.map((c) => {\n      registry[c.name].enabled = true;\n      return c;\n    });\n  };\n  const withElemType = (t: string): ElemRegistryEntry<any> => {\n    let name = '';\n    Object.keys(registry).map((key) => {\n      if (registry[key].cfgKey === t) {\n        name = key;\n      }\n      return key;\n    });\n    return registry[name];\n  };\n  export const process = (data: ProcessorInfo): Json => {\n    const tmp: {\n      [key: string]: Elem & { cn: string[]; r: boolean };\n    } = {};\n    Object.keys(data.panels).map((key) => {\n      const p = data.panels[key];\n      tmp[key] = {\n        type: 'panel',\n        label: p.label,\n        settings: {\n          flow: p.orientation === 'V' ? 'vertical' : 'horizontal',\n        },\n        value: [],\n        cn: p.children,\n        r: true,\n      };\n      return key;\n    });\n    Object.keys(tmp).map((key) => {\n      const p = tmp[key];\n      p.cn.map((k) => {\n        if (tmp[k]) {\n          p.value.push(tmp[k]);\n          tmp[k].r = false;\n        } else if (data.elements[k]) {\n          const e = data.elements[k] as any;\n          e.settings = e.args;\n          p.value.push(e);\n        }\n        return k;\n      });\n      return key;\n    });\n    const ret: Json = [];\n    Object.keys(tmp).map((key) => {\n      return tmp[key].r ? ret.push(tmp[key]) : 0;\n    });\n    return ret;\n  };\n  export const render = (\n    els: Elem | Elem[],\n    onChange?: (o: any) => void\n  ): JSX.Element[] => {\n    if (!Array.isArray(els)) {\n      els = [els];\n    }\n    const ret: JSX.Element[] = [];\n    els.map((e: Elem) => {\n      const reg = withElemType(e.type);\n      if (reg && reg.enabled) {\n        const build = reg.builder(e, onChange);\n        ret.push(build);\n      }\n      return e;\n    });\n    return ret;\n  };\n}\n","import React from 'react';\nimport styles from './UiUi.module.scss';\nimport { UiUiUtilLayer } from 'ui/utils/GlobalLayer';\n\nimport { Config } from './config';\n\ntype Args = {\n  data: Config.Json | Config.ProcessorInfo | null;\n  defaultDock?: string;\n  top?: Config.Json | Config.ProcessorInfo | null;\n  bottom?: Config.Json | Config.ProcessorInfo | null;\n};\nexport function RootElem({ data, top, bottom, defaultDock = 'B' }: Args) {\n  const [tElems, setTElems] = React.useState<JSX.Element[]>([]);\n  const [bElems, setBElems] = React.useState<JSX.Element[]>([]);\n\n  function onChange(o: any) {\n    console.log(o);\n  }\n\n  const pushElems = React.useCallback(\n    (els: JSX.Element[], dock: 'T' | 'B') => {\n      if (dock === 'T') {\n        setTElems([...tElems, ...els]);\n      } else {\n        setBElems([...bElems, ...els]);\n      }\n    },\n    [tElems, bElems]\n  );\n\n  React.useEffect(() => {\n    if (data === null && top === null && bottom === null) return;\n    if (data !== null) {\n      const pdata = Array.isArray(data) ? data : Config.process(data);\n      if (defaultDock === 'B') {\n        setBElems(Config.render(pdata, onChange));\n      } else {\n        setTElems(Config.render(pdata, onChange));\n      }\n    }\n    if (top) {\n      const pdata = Array.isArray(top) ? top : Config.process(top);\n      pushElems(Config.render(pdata, onChange), 'T');\n    }\n    if (bottom) {\n      const pdata = Array.isArray(bottom) ? bottom : Config.process(bottom);\n      pushElems(Config.render(pdata, onChange), 'B');\n    }\n  }, [data, bottom, top, defaultDock]);\n\n  return (\n    <div className={`${styles.uiUiRoot} ${styles.vars}`}>\n      <UiUiUtilLayer></UiUiUtilLayer>\n      <div className={styles.docks}>\n        <div rel=\"dock\" className={styles.topDock}>\n          {tElems}\n        </div>\n        <div rel=\"dock\" className={styles.bottomDock}>\n          {bElems}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nRootElem.withData = (data: Args['data']) => <RootElem data={data} />;\n","import React from 'react';\nimport styles from './Group.module.scss';\n\ntype Args = {\n  children: JSX.Element[] | JSX.Element;\n  flow?: 'col' | 'row';\n};\n\nexport function UiUiGroup({ children, flow }: Args) {\n  return (\n    <div className={styles.uiGroup} data-flow={flow ?? 'col'}>\n      {children}\n    </div>\n  );\n}\n","import styles from './Panel.module.scss';\nimport React from 'react';\nimport { Config } from '../config';\nimport { UiUiGroup } from './Group';\n\ntype Obj = Config.Obj<'panel', { flow: 'row' | 'col' }, Config.Elem[]>;\n\nexport function UiUiPanel({ o, onChange }: Config.Args<Obj>) {\n  const [children, setChildren] = React.useState<JSX.Element[]>([]);\n\n  React.useEffect(() => {\n    setChildren(Config.render(o.value, onChange));\n  }, [o]);\n\n  return (\n    <div className={styles.uiPanel} rel=\"panel\">\n      <label>\n        {o.label}\n        <span>&nbsp;</span>\n      </label>\n      <UiUiGroup flow={o.settings.flow}>{children}</UiUiGroup>\n    </div>\n  );\n}\n\ntype AltSettings = { settings: undefined | { flow: undefined } };\nConfig.register(\n  UiUiPanel,\n  'panel',\n  (o: Config.Alt<Obj, AltSettings>, onChange?: (a: any) => void) => {\n    const obj = o as Obj;\n    obj.type = 'panel';\n    if (obj.settings === undefined) obj.settings = { flow: 'row' };\n    if (obj.settings.flow === undefined) obj.settings.flow = 'row';\n    return <UiUiPanel key={o.label} o={obj} onChange={onChange} />;\n  }\n);\n","import mainStyles from './styles.module.scss';\n\ntype iStyle = typeof mainStyles;\ntype styleBook = {\n  [key: string]: iStyle;\n};\nconst styles: styleBook = {\n  main: mainStyles,\n};\n\nexport namespace Styles {\n  export const of = (name: string): iStyle => {\n    return styles[name];\n  };\n  export const register = (name: string, style: iStyle) => {\n    styles[name] = style;\n  };\n}\n","export namespace N {\n  export const radToAngle = (a: number) => (a / (2 * Math.PI)) * 360;\n  export const ev = (c: boolean) => (c ? 1 : 0);\n}\n\nexport function V2(x: number | boolean, y: number | boolean | null = null) {\n  x = typeof x === 'boolean' ? (x ? 1 : 0) : x;\n  y = typeof y === 'boolean' ? (y ? 1 : 0) : y;\n  y = y ?? x;\n  return { x, y };\n}\nexport type V2 = ReturnType<typeof V2>;\nV2.add = (a: V2, b: V2) => V2(a.x + b.x, a.y + b.y);\nV2.times = (a: V2, b: V2) => a.x * b.x + a.y * b.y;\nV2.fromRad = (a: number, radius: number | V2 = 1) => {\n  radius = typeof radius === 'number' ? V2(radius) : radius;\n  return V2(radius.x * Math.cos(a), radius.y * Math.sin(a));\n};\nV2.str = (v: V2) => `${v.x} ${v.y}`;\nexport function M2(a: V2, b: V2) {\n  return { a, b };\n}\nexport type M2 = ReturnType<typeof M2>;\nM2.times = (m: M2, c: V2) => V2(V2.times(m.a, c), V2.times(m.b, c));\nM2.radToRot = (a: number) =>\n  M2(V2(Math.cos(a), -Math.sin(a)), V2(Math.sin(a), Math.cos(a)));\n","import React from 'react';\nimport { Styles } from '../styles';\nimport { Config } from '../config';\nimport type * as U from '../utils/numbers';\n\nimport sliderStyles from './Slider.module.scss';\nStyles.register('Slider', sliderStyles);\n\ntype Obj = {\n  type?: 'slider';\n  label: string;\n  settings: U.THREE_NUMBERS;\n  value: [number];\n};\n\nfunction pcent(s: U.THREE_NUMBERS, v: number) {\n  const a = v - s[0];\n  const b = s[1] - s[0];\n  return `${(a / b) * 100}%`;\n}\n\nexport function UiUiSlider({ o, onChange }: Config.Args<Obj>) {\n  const thumbRef = React.useRef<HTMLDivElement>(null);\n  const [value, setValue] = React.useState(o.value[0]);\n  const [props, setProps] = React.useState<U.THREE_NUMBERS>([0, 1, 0.01]);\n\n  function prop(i: 0 | 1 | 2): number {\n    return props[i] ? props[i] : 0;\n  }\n\n  React.useEffect(() => {\n    const s = o.settings;\n    const v = o.value[0];\n    setProps(s);\n    setValue(v);\n    thumbRef.current?.style.setProperty('--width', pcent(s, v));\n  }, [o]);\n\n  function beforeOnChange(e: any) {\n    const v = Number(e.target.value);\n    o.value[0] = v;\n    setValue(v);\n    thumbRef.current?.style.setProperty('--width', pcent(props, v));\n    if (onChange) onChange(o);\n  }\n\n  const styles = Styles.of('Slider');\n\n  return (\n    <div className={styles.uiSlider}>\n      <div ref={thumbRef} className={styles.uiSliderThumbReplacement}></div>\n      <div className={styles.uiSliderFlexContainer}>\n        <label htmlFor={o.label}>{o.label}</label>\n        <div className={styles.uiSliderValue}>{value}</div>\n      </div>\n      <input\n        type=\"range\"\n        name={o.label}\n        min={prop(0)}\n        max={prop(1)}\n        step={prop(2)}\n        value={value}\n        onChange={beforeOnChange}\n      />\n    </div>\n  );\n}\ntype Alt = {\n  settings: { min: number; max: number; step: number };\n  value: number;\n};\nConfig.register(\n  UiUiSlider,\n  'slider',\n  (o: Config.Alt<Obj, Alt>, onChange?: (o: Obj) => void) => {\n    const obj = o as Obj;\n    const s = o.settings;\n    obj.type = 'slider';\n    obj.settings = Array.isArray(s)\n      ? (s as U.THREE_NUMBERS)\n      : [s.min, s.max, s.step];\n    obj.value = Array.isArray(o.value) ? o.value : [o.value];\n    return <UiUiSlider key={obj.label} o={obj} onChange={onChange} />;\n  }\n);\n","import { V2, M2, N } from './vec';\nexport function ellipse(\n  c: number | V2,\n  r: number | V2,\n  aS: number,\n  aD: number,\n  phi: number = 0\n) {\n  c = typeof c === 'number' ? V2(c) : c;\n  r = typeof r === 'number' ? V2(r) : r;\n  const rM = M2.radToRot(phi);\n  const s: V2 = V2.add(c, M2.times(rM, V2.fromRad(aS, r)));\n  const e: V2 = V2.add(c, M2.times(rM, V2.fromRad(aS + aD, r)));\n  const a: V2 = V2(aD > Math.PI, aD > 0);\n  //\n  const fM = V2.str(s);\n  const fA = `${V2.str(r)} ${N.radToAngle(phi)} ${V2.str(a)} ${V2.str(e)}`;\n  return `M ${fM} A ${fA}`;\n}\n","import React from 'react';\nimport { THREE_NUMBERS } from 'utils/numbers';\nimport RulerStyles from './Ruler.module.scss';\n\ntype Args = {\n  mms: THREE_NUMBERS;\n  value: number;\n  scale: number;\n  show: boolean;\n};\nfunction normalize(s: THREE_NUMBERS, v: number) {\n  return (v - s[0]) / (s[1] - s[0]);\n}\n\nexport function UiUiRuler({ value, mms, scale = 1, show = false }: Args) {\n  /* eslint-disable no-unused-vars */\n  const rulerRef = React.useRef<HTMLDivElement>(null);\n  const [display, setDisplay] = React.useState(show ? 'block' : 'none');\n  const [val, setVal] = React.useState(value);\n  const [normalized, setNormalized] = React.useState(0);\n  const [properties, setProps] = React.useState<THREE_NUMBERS>([0, 1, 0.01]);\n  /* eslint-enable no-unused-vars */\n  React.useEffect(() => {\n    setVal(value);\n    setProps(mms);\n    const n = normalize(mms, value);\n    setNormalized(n);\n    setDisplay(show ? 'block' : 'none');\n    rulerRef.current?.style.setProperty('--val', `${n * 100}%`);\n  }, [value, mms, show]);\n\n  return (\n    <div\n      className={RulerStyles.rulerWrapper}\n      ref={rulerRef}\n      data-show={display}\n    >\n      <div className={RulerStyles.ruler}>\n        <div className={RulerStyles.rulerInner}>\n          <div role=\"unit\" data-u=\"0\"></div>\n          <div role=\"unit\" data-u=\"0.25\"></div>\n          <div role=\"unit\" data-u=\"0.5\"></div>\n          <div role=\"unit\" data-u=\"0.75\"></div>\n          <div role=\"unit\" data-u=\"1\"></div>\n        </div>\n      </div>\n      <div className={RulerStyles.rulerIndicator}></div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Config } from '../config';\nimport { ellipse } from '../utils/svg';\nimport { THREE_NUMBERS } from 'utils/numbers';\nimport KnobStyles from './Knob.module.scss';\nimport { UiUiRuler } from './Ruler';\n\ntype Obj = {\n  type?: 'knob';\n  label: string;\n  settings: THREE_NUMBERS;\n  value: [number];\n};\ntype Alt = {\n  settings: { min: number; max: number; step: number };\n  value: number;\n};\n\nfunction normalize(s: THREE_NUMBERS, v: number) {\n  return (v - s[0]) / (s[1] - s[0]);\n}\n\nexport function UiUiKnob({ o, onChange }: Config.Args<Obj>) {\n  const [rulerShow, setRulerShow] = React.useState(false);\n  const [value, setValue] = React.useState(o.value[0]);\n  const [normalized, setNormalized] = React.useState(0);\n  const [properties, setProps] = React.useState<THREE_NUMBERS>([0, 1, 0.01]);\n\n  React.useEffect(() => {\n    setValue(o.value[0]);\n    setProps(o.settings);\n    setNormalized(normalize(o.settings, o.value[0]));\n  }, [o]);\n\n  const updateWithNormalizedValue = (p: number) => {\n    p = Math.max(0, Math.min(1, p));\n    setNormalized(p);\n    o.value[0] = p * (properties[1] - properties[0]) + properties[0];\n    setValue(o.value[0]);\n    if (onChange) onChange(o);\n  };\n\n  let mPos: { x: number; y: number } | false = false;\n\n  const onMouseMove = (e: any) => {\n    if (mPos === false) {\n      return (mPos = { x: e.clientX, y: e.clientY });\n    }\n    const diff =\n      (e.clientX - mPos.x) * 0.005 +\n      Math.round((e.clientY - mPos.y) * 50) * -0.0001;\n    updateWithNormalizedValue(normalized + diff);\n  };\n  const onMouseUp = (e: any) => {\n    e.preventDefault();\n    setRulerShow(false);\n    document.removeEventListener('mousemove', onMouseMove);\n    document.removeEventListener('mouseup', onMouseUp);\n  };\n  const onMouseDown = (e: any) => {\n    e.preventDefault();\n    setRulerShow(true);\n    mPos = false;\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  };\n\n  const r = Math.PI * 0.5;\n  const full = Math.PI * 1.94;\n\n  return (\n    <div className={KnobStyles.wrapper}>\n      <UiUiRuler value={value} mms={properties} scale={2} show={rulerShow} />\n      <svg width=\"16\" height=\"14\" onMouseDown={onMouseDown}>\n        <path\n          strokeWidth=\"5.5\"\n          fill=\"none\"\n          stroke=\"#999\"\n          opacity=\".8\"\n          d={ellipse(8, 3.5, 0, full, r)}\n        ></path>\n        <path\n          strokeWidth=\"2.5\"\n          fill=\"none\"\n          stroke=\"#fff\"\n          d={ellipse(8, 3.2, 0, full * normalized, r)}\n        ></path>\n      </svg>\n    </div>\n  );\n}\nConfig.register(\n  UiUiKnob,\n  'knob',\n  (o: Config.Alt<Obj, Alt>, onChange?: (value: Obj) => void) => {\n    const obj = o as Obj;\n    const s = o.settings;\n    obj.type = 'knob';\n    obj.settings = Array.isArray(s)\n      ? (s as THREE_NUMBERS)\n      : [s.min, s.max, s.step];\n    obj.value = Array.isArray(o.value) ? o.value : [o.value];\n    return <UiUiKnob key={obj.label} o={obj} onChange={onChange} />;\n  }\n);\n","export type TWO_NUMBERS = [number, number];\nexport type THREE_NUMBERS = [number, number, number];\nexport type SIX_NUMBERS = [number, number, number, number, number, number];\n\nexport const decimalsCount = (n: number) => {\n  if (Math.floor(n) === n) return 0;\n  return n.toString().split('.')[1].length || 0;\n};\n\nexport const fixDigits = (n: number, d: number): number => {\n  return (n.toFixed(d) as any) * 1;\n};\nexport const fixDigitsLike = (n: number, ref: number): number => {\n  return fixDigits(n, decimalsCount(ref));\n};\n\nexport const limit = (n: number, min: number = 0, max: number = 1): number => {\n  return Math.min(Math.max(n, min), max);\n};\n\nexport class StepCtrl {\n  static fromArray(a: THREE_NUMBERS) {\n    return new StepCtrl(a[0], a[1], a[2]);\n  }\n\n  readonly min: number;\n  readonly max: number;\n  readonly step: number;\n  readonly range: number;\n  protected stepDigits: number;\n  constructor(min: number, max: number, step: number) {\n    this.min = min;\n    this.max = max;\n    this.step = step;\n    this.range = max - min;\n    this.stepDigits = decimalsCount(step);\n  }\n\n  filter(v: number) {\n    v = limit(v, this.min, this.max);\n    let adj = v % this.step;\n    adj = this.step - Math.abs(adj) < 0.000000001 ? 0 : adj;\n    return fixDigits(v - adj, this.stepDigits);\n  }\n\n  normalize(v: number) {\n    v = this.filter(v);\n    return fixDigits((v - this.min) / this.range, this.stepDigits);\n  }\n\n  denormalize(v: number) {\n    v = this.range * limit(v) + this.min;\n    v = this.filter(v);\n    return fixDigits(v, this.stepDigits);\n  }\n}\n","import React from 'react';\nimport styles from './styles.module.scss';\nimport { XYStepSettings } from './types';\nimport { StepCtrl } from '../../../utils/numbers';\n\nexport function getXYCtrlsFromArray(s: XYStepSettings) {\n  return {\n    x: StepCtrl.fromArray(s.x),\n    y: StepCtrl.fromArray(s.y),\n  };\n}\nconst grayBackground = <div className={styles.defaultBackground} />;\n\nexport function UiUiXYPad({ children, background = grayBackground }: any) {\n  return (\n    <div className={styles.xy}>\n      <div className={styles.backgroundWrapper}>{background}</div>\n      <div className={styles.handlesWrapper}>{children}</div>\n    </div>\n  );\n}\n","export const getDragabbleArea = (el: HTMLElement, container?: HTMLElement) => {\n  if (!container) {\n    container = el.parentElement as HTMLElement;\n  }\n  const cB = container.getBoundingClientRect();\n  const eB = el.getBoundingClientRect();\n  return {\n    w: cB.width - eB.width,\n    h: cB.height - eB.height,\n    eB,\n    cB,\n  };\n};\n\nexport const setElemPos = (el: HTMLElement, pos: { x: number; y: number }) => {\n  el.style.left = `${pos.x}px`;\n  el.style.top = `${pos.y}px`;\n};\n","import { setElemPos, getDragabbleArea } from '../utils/dom';\nimport { limit } from '../utils/numbers';\nimport { UtilLayer } from '../ui/utils/GlobalLayer';\n\ntype QuickRectInfo = {\n  t: number;\n  r: number;\n  b: number;\n  l: number;\n  w: number;\n  h: number;\n};\ntype EventInfo = QuickRectInfo & {\n  pos: {\n    x: number;\n    y: number;\n  };\n  ori: {\n    x: number;\n    y: number;\n  };\n};\n\nfunction brInfo(el: HTMLElement): QuickRectInfo {\n  const {\n    top: t,\n    left: l,\n    bottom: b,\n    right: r,\n    width: w,\n    height: h,\n  } = el.getBoundingClientRect();\n  return { t, l, b, r, w, h };\n}\n\nfunction getInfo(el: HTMLElement, p: { x: number; y: number }): EventInfo {\n  const { t, l, b, r, w, h } = brInfo(el);\n  return Object.assign(\n    { t, l, b, r, w, h },\n    {\n      pos: { x: p.x - l, y: p.y - t },\n      ori: p,\n    }\n  );\n}\n\nexport const DragDelegate = (tgt: HTMLElement, sets: any) => {\n  const process = (el: HTMLElement, ev: MouseEvent, type: string) => {\n    ev.preventDefault();\n    const info = getInfo(el, { x: ev.clientX, y: ev.clientY });\n    if (sets[type]) sets[type](info);\n    if (sets.all) sets.all(info, type);\n  };\n  const onDrag = (ev: MouseEvent) => {\n    if (!sets.dragging && !sets.all) return;\n    process(tgt, ev, 'dragging');\n  };\n  const onRelease = (ev: MouseEvent) => {\n    document.removeEventListener('mousemove', onDrag);\n    document.removeEventListener('mouseup', onRelease);\n    if (!sets.released && !sets.all) return;\n    process(tgt, ev, 'released');\n  };\n  tgt.onmousedown = (ev: MouseEvent) => {\n    document.addEventListener('mousemove', onDrag);\n    document.addEventListener('mouseup', onRelease);\n    if (!sets.pressed && !sets.all) return;\n    process(tgt, ev, 'pressed');\n  };\n};\n\nexport const DragOnParentDelegate = (tgt: HTMLElement, sets: any) => {\n  const parent: HTMLElement = tgt.parentElement as HTMLElement;\n  DragDelegate(tgt, {\n    all: (info: EventInfo, type: string) => {\n      if (type === 'pressed') {\n        UtilLayer.setRole('dragging');\n      } else if (type === 'released') {\n        UtilLayer.resetRole();\n      }\n      const s = { w: info.w, h: info.h };\n      if (!sets.elementCenter) {\n        sets.elementCenter = { x: s.w / 2, y: s.h / 2 }; // We're assumning the center of the obj is it's absolute center\n      }\n      const area = getDragabbleArea(tgt, parent);\n      const pp = {\n        x: info.ori.x - area.cB.left - sets.elementCenter.x,\n        y: info.ori.y - area.cB.top - sets.elementCenter.y,\n      };\n      const nInfo = info as any;\n      nInfo.normalized = {\n        x: limit(pp.x / area.w),\n        y: limit(pp.y / area.h),\n      };\n      nInfo.constrained = {\n        x: nInfo.normalized.x * area.w,\n        y: nInfo.normalized.y * area.h,\n      };\n      if (!sets.dontSetPos) {\n        setElemPos(tgt, nInfo.constrained); // dunno ... should we delagate this at all?\n      }\n      if (sets[type]) sets[type](nInfo);\n      if (sets.all) sets.all(nInfo, type);\n    },\n  });\n};\n","import React from 'react';\nimport styles from './styles.module.scss';\nimport { XYStepCtrls } from './types';\nimport { getDragabbleArea, setElemPos } from '../../../utils/dom';\nimport { DragOnParentDelegate } from '../../../action/delegate';\nimport { TWO_NUMBERS } from '../../../utils/numbers';\n\ntype DragInfo = {\n  normalized: { x: number; y: number };\n};\n\ntype Options = {\n  id: string;\n  label: string;\n  flipY: boolean;\n  flipX: boolean;\n};\n\ntype Args = {\n  value: TWO_NUMBERS;\n  stepCtrls: XYStepCtrls;\n  onChange: (key: string, v: TWO_NUMBERS) => void;\n  options?: Partial<Options>;\n};\n\nfunction denorm(v: TWO_NUMBERS, c: XYStepCtrls, opts: Options): TWO_NUMBERS {\n  v[0] = c.x.denormalize(opts.flipX ? 1 - v[0] : v[0]);\n  v[1] = c.y.denormalize(opts.flipY ? 1 - v[1] : v[1]);\n  return v;\n}\n\nfunction norm(v: TWO_NUMBERS, c: XYStepCtrls, opts: Options): TWO_NUMBERS {\n  const r = [c.x.normalize(v[0]), c.y.normalize(v[1])] as TWO_NUMBERS;\n  return [opts.flipX ? 1 - r[0] : r[0], opts.flipY ? 1 - r[1] : r[1]];\n}\n\nfunction updateDisplay(\n  v: TWO_NUMBERS,\n  c: XYStepCtrls,\n  e: HTMLElement | null,\n  opts: Options\n) {\n  if (e === null) return;\n  const avail = getDragabbleArea(e);\n  const n = norm(v, c, opts);\n  setElemPos(e, {\n    x: n[0] * avail.w,\n    y: n[1] * avail.h,\n  });\n}\n\nfunction processOptions(o: Partial<Options> | undefined): Options {\n  return {\n    id: 'default',\n    label: '',\n    flipY: true,\n    flipX: false,\n    ...(o || {}),\n  };\n}\n\nexport function UiUiXYHandle({ value, stepCtrls, onChange, options }: Args) {\n  const opts = processOptions(options);\n  const xyHandleRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    updateDisplay(value, stepCtrls, xyHandleRef.current, opts);\n  }, [value, opts, stepCtrls]);\n\n  React.useEffect(() => {\n    if (xyHandleRef.current === null) return;\n    DragOnParentDelegate(xyHandleRef.current, {\n      dontSetPos: true,\n      all: ({ normalized: n }: DragInfo) => {\n        const v = denorm([n.x, n.y], stepCtrls, opts);\n        value[0] = v[0];\n        value[1] = v[1];\n        updateDisplay(value, stepCtrls, xyHandleRef.current, opts);\n        if (onChange) onChange(opts.id, value);\n      },\n    });\n  }, [xyHandleRef, stepCtrls, value, onChange, opts]);\n\n  return (\n    <div\n      ref={xyHandleRef}\n      className={styles.handle}\n      data-key={opts.id}\n      role=\"handle\"\n    >\n      {opts.label}\n    </div>\n  );\n}\n","import React from 'react';\nimport { GLSL } from 'glslcv';\n\nconst blankFragShader = `#version 300 es\nprecision highp float;\nout vec4 fragColor;\nuniform vec2 u_resolution;\nvoid main(){fragColor = vec4(vec3(0.),1.);}`;\n\nexport type UUCb = (us: GLSL.Uniform.Info[]) => void;\nexport type Opts = {\n  autoPlay?: boolean;\n  callbacks?: {\n    refresh?: () => void;\n  };\n};\ntype Args = {\n  fragShaderCode?: string;\n  onUniformsUpdate?: UUCb;\n  options?: Opts;\n};\n\nconst defaultUniformsUpdater: UUCb = (us) => {};\n\nexport function UiUiCanvasBckgd({\n  onUniformsUpdate = defaultUniformsUpdater,\n  fragShaderCode = blankFragShader,\n  options = { autoPlay: true },\n}: Args) {\n  const canvasRef = React.useRef<HTMLCanvasElement>(null);\n\n  class FragShaderMiddleware implements GLSL.Shader.Middleware {\n    private _glsl: GLSL | null = null;\n    private updater: UUCb;\n\n    constructor(private cb: UUCb) {\n      this.updater = cb;\n    }\n\n    updateUniforms(us: GLSL.Uniform.Info[]) {\n      this.updater(us);\n    }\n\n    set glsl(glsl: GLSL | null) {\n      this._glsl = glsl;\n    }\n\n    get glsl(): GLSL | null {\n      return this._glsl;\n    }\n  }\n\n  const [mw] = React.useState(new FragShaderMiddleware(onUniformsUpdate));\n\n  React.useEffect(() => {\n    if (options.autoPlay !== undefined) {\n      if (!('callbacks' in options)) options.callbacks = {};\n      if (options.callbacks) {\n        options.callbacks.refresh = () => mw.glsl?.drawFrame();\n      }\n    }\n    if (!mw.glsl && canvasRef.current) {\n      mw.glsl = GLSL.init2D(canvasRef.current)\n        .addFragmentShaderMiddleware(mw)\n        .setShaderSource('fragment', fragShaderCode);\n      if (options.autoPlay === undefined || options.autoPlay) {\n        mw.glsl.play();\n      } else {\n        mw.glsl.drawFrame();\n      }\n    }\n  }, [canvasRef, mw, fragShaderCode, options]);\n\n  return <canvas ref={canvasRef}></canvas>;\n}\n","import { UiUiXYPad, getXYCtrlsFromArray } from './xy/XYPad';\nimport { UiUiXYHandle } from './xy/XYHandle';\nimport { UiUiCanvasBckgd, UUCb, Opts } from './xy/XYPadCanvasBackground';\nimport { XYStepCtrls, XYStepSettings } from './xy/types';\nimport { SIX_NUMBERS, THREE_NUMBERS } from 'utils/numbers';\n\nexport namespace XY {\n  export const Pad = UiUiXYPad;\n  export const Handle = UiUiXYHandle;\n  export namespace Canvas {\n    export const Bckgd = UiUiCanvasBckgd;\n    export type BckgdOptions = Opts;\n    export type Callback = UUCb;\n  }\n  export const processSettings = (\n    d: SIX_NUMBERS | XYStepSettings\n  ): XYStepSettings => {\n    if (!Array.isArray(d)) return d;\n    return {\n      x: d.slice(0, 3) as THREE_NUMBERS,\n      y: d.slice(3) as THREE_NUMBERS,\n    };\n  };\n  export namespace Step {\n    export const getCtrlsFromArray = getXYCtrlsFromArray;\n    export type Ctrls = XYStepCtrls;\n    export type Settings = XYStepSettings;\n  }\n}\n","import React from 'react';\nimport { Config } from '../config';\n\nimport { SIX_NUMBERS, THREE_NUMBERS, TWO_NUMBERS } from 'utils/numbers';\nimport styles from './ColorRamp.module.scss';\nimport { XY } from './utils/XY';\n\nconst rampShaderCode = `#version 300 es\nprecision mediump float;\nfloat MPI2 = 6.2831853;\nout vec4 fragColor;\nuniform vec2 u_resolution;\nuniform float[6] c;\nvoid main(){\n  float x = gl_FragCoord.x/u_resolution.x;\n  vec3 cp = vec3(c[0],c[1],c[2]);\n  vec3 ci = vec3(c[3],c[4],c[5]);\n  vec3 c = (cos((x+(1.-cp))*MPI2)*.5+.5) * ci;\n  fragColor = vec4(c ,1.);\n}`;\n\ntype Args = Config.Args<Config.Obj<'color_ramp', [], SIX_NUMBERS>>;\n\nexport function UiUiColorRamp({ o, onChange }: Args) {\n  const wrapperRef = React.useRef<HTMLDivElement>(null);\n  const [values, setValues] = React.useState(o.value);\n\n  const defStepSet = [0, 1, 0.01] as THREE_NUMBERS;\n  const stepCtrls = XY.Step.getCtrlsFromArray({ x: defStepSet, y: defStepSet });\n\n  const options = {\n    autoPlay: false,\n  } as XY.Canvas.BckgdOptions;\n\n  function getV(id: string): TWO_NUMBERS {\n    const i = 'rgb'.indexOf(id);\n    if (i === -1) return [0, 0];\n    return [values[i], values[i + 3]];\n  }\n\n  function setV(id: string, v: TWO_NUMBERS) {\n    const i = 'rgb'.indexOf(id);\n    if (i === -1) return;\n    values[i] = v[0];\n    values[i + 3] = v[1];\n    setValues(values);\n  }\n\n  function onUpdate(id: string, vs: TWO_NUMBERS) {\n    setV(id, vs);\n    o.value = values;\n    if (onChange) onChange(o);\n    if (options.callbacks?.refresh) options.callbacks.refresh();\n  }\n\n  const onUniformsUpdate: XY.Canvas.Callback = (us) => {\n    if (!values) return;\n    us.map((u) => {\n      u.value = u.name === 'c' ? values : u.value;\n      return u;\n    });\n  };\n\n  return (\n    <div ref={wrapperRef} className={styles.uiColorRamp}>\n      <XY.Pad\n        className={styles.cr_pad}\n        background={\n          <XY.Canvas.Bckgd\n            fragShaderCode={rampShaderCode}\n            onUniformsUpdate={onUniformsUpdate}\n            options={options}\n          />\n        }\n      >\n        <XY.Handle\n          options={{ id: 'r', label: 'R' }}\n          value={getV('r')}\n          stepCtrls={stepCtrls}\n          onChange={onUpdate}\n        />\n        <XY.Handle\n          options={{ id: 'g', label: 'G' }}\n          value={getV('g')}\n          stepCtrls={stepCtrls}\n          onChange={onUpdate}\n        />\n        <XY.Handle\n          options={{ id: 'b', label: 'B' }}\n          value={getV('b')}\n          stepCtrls={stepCtrls}\n          onChange={onUpdate}\n        />\n      </XY.Pad>\n    </div>\n  );\n}\n\nfunction boot(o: Args['o'], onChange?: Args['onChange']) {\n  return <UiUiColorRamp key={o.label} o={o} onChange={onChange} />;\n}\nConfig.register(UiUiColorRamp, 'color_ramp', boot);\n","import React from 'react';\nimport styles from './Point.module.scss';\nimport { Config } from '../config';\nimport { UiUiSlider } from './Slider';\nimport { UiUiGroup } from './Group';\nimport { XY } from './utils/XY';\nimport { TWO_NUMBERS, SIX_NUMBERS, THREE_NUMBERS } from 'utils/numbers';\n\ntype Obj = {\n  type?: 'point';\n  label: string;\n  settings: XY.Step.Settings;\n  value: TWO_NUMBERS;\n};\ntype Args = Config.Args<Obj>;\n\nexport function UiUiPoint({ o, onChange }: Args) {\n  const [value, setValue] = React.useState(o.value);\n  const [properties, setProperties] = React.useState(o.settings);\n  const stepCtrls = XY.Step.getCtrlsFromArray(o.settings);\n\n  React.useEffect(() => {\n    setValue(o.value);\n    setProperties(o.settings);\n  }, [o]);\n\n  function onSliderUpdate(obj: any) {\n    o.value['XY'.indexOf(obj.label)] = obj.value[0];\n    setValue([...o.value]);\n    if (onChange) onChange(o);\n  }\n  function onHandleUpdate(k: string, v: TWO_NUMBERS) {\n    o.value[0] = v[0];\n    o.value[1] = v[1];\n    setValue([...o.value]);\n    if (onChange) onChange(o);\n  }\n\n  function elO(i: number) {\n    const label = 'XY'[i];\n    const k = label.toLocaleLowerCase() as keyof Obj['settings'];\n    return {\n      label,\n      value: [value[i]] as [number],\n      settings: properties[k],\n    };\n  }\n\n  return (\n    <div rel=\"panel\" className={styles.wrapper}>\n      <label>\n        {o.label}\n        <span>&nbsp;</span>\n      </label>\n      <UiUiGroup>\n        <XY.Pad className={styles.xy}>\n          <XY.Handle\n            value={value}\n            stepCtrls={stepCtrls}\n            onChange={onHandleUpdate}\n          />\n        </XY.Pad>\n        <UiUiSlider o={elO(0)} onChange={onSliderUpdate} />\n        <UiUiSlider o={elO(1)} onChange={onSliderUpdate} />\n      </UiUiGroup>\n      <input type=\"hidden\" name={o.label} value={value.toString()} />\n    </div>\n  );\n}\n\ntype Alt = {\n  settings: SIX_NUMBERS;\n};\nfunction boot(o: Config.Alt<Obj, Alt>, onChange?: Args['onChange']) {\n  function enforceSettings(\n    s: SIX_NUMBERS | XY.Step.Settings\n  ): XY.Step.Settings {\n    if (!Array.isArray(s)) return s;\n    return {\n      x: s.slice(0, 3) as THREE_NUMBERS,\n      y: s.slice(3) as THREE_NUMBERS,\n    };\n  }\n  o.settings = enforceSettings(o.settings);\n  return <UiUiPoint key={o.label} o={o as Obj} onChange={onChange} />;\n}\nConfig.register(UiUiPoint, 'point', boot);\n","import React from 'react';\nimport { Config } from '../config';\nimport styles from './Sine.module.scss';\nimport { THREE_NUMBERS, TWO_NUMBERS, SIX_NUMBERS } from 'utils/numbers';\nimport { XY } from './utils/XY';\n\nconst rampShaderCode = `#version 300 es\nprecision highp float;\nfloat MPI2 = 6.2831853;\nout vec4 fragColor;\nuniform vec2 u_resolution;\nuniform float[2] c;\nint yAt(int x, float hy){\n  float nx = float(x) / u_resolution.x;\n  float y = sin(nx * c[0] * MPI2) * c[1];\n  return int(y * hy + hy);\n}\nvoid main(){\n  float hy = u_resolution.y * .5;\n  int x = int(gl_FragCoord.x);\n  int y = int(gl_FragCoord.y);\n  int dy = yAt(x, hy);\n  int pdy = yAt(x-1, hy);\n  float d = min(dy, pdy) <= y && y <= max(dy, pdy) ? 1. : 0.;\n  fragColor = vec4(vec3(d),1.);\n}`;\n\ntype Obj = {\n  type?: 'sine';\n  label: string;\n  settings: XY.Step.Settings;\n  value: TWO_NUMBERS;\n};\n\ntype Args = Config.Args<Obj>;\n\nexport function UiUiSine({ o, onChange }: Args) {\n  const wrapperRef = React.useRef<HTMLDivElement>(null);\n  const [values, setValues] = React.useState(o.value);\n\n  const stepCtrls = XY.Step.getCtrlsFromArray(o.settings);\n\n  const options = {\n    autoPlay: false,\n  } as XY.Canvas.BckgdOptions;\n\n  function onHandleUpdate(id: string, v: TWO_NUMBERS) {\n    o.value[0] = v[0];\n    o.value[1] = v[1];\n    setValues([...o.value]);\n    if (onChange) onChange(o);\n    if (options.callbacks?.refresh) options.callbacks.refresh();\n  }\n\n  const onUniformsUpdate: XY.Canvas.Callback = (us) => {\n    if (!values) return;\n    us.map((u) => {\n      u.value = u.name === 'c' ? values : u.value;\n      return u;\n    });\n  };\n\n  const bckgd = (\n    <XY.Canvas.Bckgd\n      fragShaderCode={rampShaderCode}\n      onUniformsUpdate={onUniformsUpdate}\n      options={options}\n    />\n  );\n\n  return (\n    <div ref={wrapperRef} className={styles.uiSine}>\n      <XY.Pad background={bckgd}>\n        <XY.Handle\n          value={values}\n          stepCtrls={stepCtrls}\n          onChange={onHandleUpdate}\n          options={{ flipX: true }}\n        />\n      </XY.Pad>\n    </div>\n  );\n}\ntype Alt = {\n  settings: SIX_NUMBERS;\n};\nfunction boot(o: Config.Alt<Obj, Alt>, onChange?: Args['onChange']) {\n  function enforceSettings(\n    s: SIX_NUMBERS | XY.Step.Settings\n  ): XY.Step.Settings {\n    if (!Array.isArray(s)) return s;\n    return {\n      x: s.slice(0, 3) as THREE_NUMBERS,\n      y: s.slice(3) as THREE_NUMBERS,\n    };\n  }\n  o.settings = enforceSettings(o.settings);\n  return <UiUiSine key={o.label} o={o as Obj} onChange={onChange} />;\n}\nConfig.register(UiUiSine, 'sine', boot);\n","import React from 'react';\nimport { Styles } from '../styles';\nimport { Config } from '../config';\n\nimport selectStyles from './Select.module.scss';\nStyles.register('Select', selectStyles);\n\ntype Obj = {\n  type?: 'select';\n  label: string;\n  settings: { [key: string]: string };\n  value: [string];\n};\n\nexport function UiUiSelect({ o, onChange }: Config.Args<Obj>) {\n  const selectRef = React.useRef<HTMLSelectElement>(null);\n  const [value, setValue] = React.useState(o.value[0]);\n\n  function beforeOnChange(e: any) {\n    const v = e.target.value as string;\n    o.value[0] = v;\n    setValue(v);\n    if (onChange) onChange(o);\n  }\n\n  const styles = Styles.of('Select');\n\n  return (\n    <div className={styles.uiSelect}>\n      <label htmlFor={o.label}>{o.label}</label>\n      <select ref={selectRef} defaultValue={value} onChange={beforeOnChange}>\n        {Object.entries(o.settings).map(([key, val]) => (\n          <option key={key} value={key}>\n            {val}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n}\ntype Alt = {\n  settings: string[];\n  value: string | number;\n};\nConfig.register(\n  UiUiSelect,\n  'select',\n  (o: Config.Alt<Obj, Alt>, onChange?: (o: Obj) => void) => {\n    const obj = o as Obj;\n    const s = o.settings;\n    obj.type = 'select';\n    if (Array.isArray(s)) {\n      obj.settings = {};\n      s.forEach((el, i) => {\n        obj.settings[i] = el;\n      });\n    }\n    obj.value = Array.isArray(o.value) ? o.value : [`${o.value}`];\n    return <UiUiSelect key={obj.label} o={obj} onChange={onChange} />;\n  }\n);\n","export namespace Str {\n  export type Pos = {\n    row: number;\n    off: number;\n  };\n  export type Range = {\n    s: Str.Pos;\n    e: Str.Pos;\n  };\n  export type Replacement = {\n    start: number;\n    end: number;\n    text: string;\n  };\n  export namespace Match {\n    export type List = {\n      [key: string]: RegExp;\n    };\n    export type ListRes = {\n      res: RegExpExecArray;\n      key: string;\n    };\n  }\n  export const Height = (code: string) => (code.match(/\\n/g) || []).length;\n  export const HeightAt = (code: string, index: number) =>\n    Height(code.substring(0, index));\n  export const Splice = (\n    str: string,\n    start: number,\n    len: number,\n    replacement: string\n  ) => str.substring(0, start) + replacement + str.substring(start + len);\n  export const replace = (str: string, i: Replacement): string => {\n    return Str.Splice(str, i.start, i.end - i.start, i.text);\n  };\n  export const FirstMatch = (code: string, list: Match.List) => {\n    let res: RegExpExecArray | null = null;\n    let key: string = '';\n    for (const k in list) {\n      const m = list[k].exec(code);\n      if (m && m.index >= 0 && (!res || m.index < res.index)) {\n        res = m;\n        key = k;\n      }\n    }\n    return key !== '' ? ({ res, key } as Match.ListRes) : false;\n  };\n  export const ReplaceAllButNLs = (m: string) => m.replace(/[^\\n]/g, ' ');\n  export const Location = (\n    before: string,\n    code: string,\n    off: Str.Pos = { off: 0, row: 0 }\n  ) => {\n    const bp = (o: number, r: number, st: Str.Pos) => ({\n      off: o + st.off,\n      row: r + st.row,\n    });\n    const s = bp(before.length, Str.Height(before), off);\n    return { s, e: bp(code.length, Str.Height(code), s) } as Str.Range;\n  };\n  export const isNumber = (c: string) => /[^\\d|.]/.exec(c) === null;\n  export const splitArgs = (code: string) => {\n    const args = code.replace(/[\\s|\\n]/g, '').split(',');\n    const openPs = (c: string) => (c.match(/\\(/g) || []).length;\n    const closedPs = (c: string) => (c.match(/\\)/g) || []).length;\n    for (let i = 0; i < args.length; i++) {\n      while (openPs(args[i]) > closedPs(args[i]) && i < args.length) {\n        args[i] += ',' + args[i + 1];\n        args.splice(i + 1, 1);\n      }\n    }\n    return args;\n  };\n  export const whileMatches = (\n    str: string,\n    re: RegExp,\n    cb: (m: RegExpExecArray) => void\n  ) => {\n    let m: RegExpExecArray | null;\n    if (!re.global)\n      throw new Error('WhileMatches can only be ran with global Regexes');\n    while ((m = re.exec(str))) cb(m);\n  };\n}\n","import { Str } from './str';\n\nexport namespace Comment {\n  export type Types = 'L' | 'S' | 'M';\n  export const L: Types = 'L';\n  export const S: Types = 'S';\n  export const M: Types = 'M';\n  export type I = {\n    type: string;\n    pos: Str.Range;\n    content: string;\n    raw: string;\n  };\n  export type List = Comment.I[];\n  export const process = (code: string) => {\n    let res: ReturnType<typeof Str.FirstMatch>;\n    const comments: List = [];\n    const data = {\n      L: /^\\s*\\/\\/[/|\\s]*(.*)$/m,\n      S: /(?<=^[^\\n]*\\w.?[^\\n]*)\\/\\/[/|\\s]*(.*)$/m,\n      M: /\\/\\*\\**(.*?)\\**\\*\\//ms,\n    };\n    while ((res = Str.FirstMatch(code, data))) {\n      const m = res.res;\n      comments.push({\n        type: res.key,\n        pos: Str.Location(code.substring(0, m.index), m[0]),\n        content: m[1],\n        raw: m[0],\n      });\n      code = Str.Splice(code, m.index, m[0].length, Str.ReplaceAllButNLs(m[0]));\n    }\n    return { comments, code };\n  };\n  type FindAdditional = (c: Comment.I) => boolean;\n  export const find = (\n    t: Comment.Types,\n    l: Comment.List,\n    st: number,\n    en: number,\n    additional?: FindAdditional\n  ) => {\n    const c = l.find((c: Comment.I) => {\n      let is = c.type === t && c.pos.e.row >= st && c.pos.e.row <= en;\n      if (is && additional) is = additional(c);\n      return is;\n    });\n    return c ? c.content : false;\n  };\n  type findUtil = (\n    l: Comment.List,\n    st: number,\n    en: number,\n    additional?: FindAdditional\n  ) => ReturnType<typeof find>;\n  export const findL: findUtil = (l, st, en, additional?) =>\n    find(Comment.L, l, st, en, additional);\n  export const findS: findUtil = (l, st, en, additional?) =>\n    find(Comment.S, l, st, en, additional);\n  export const findM: findUtil = (l, st, en, additional?) =>\n    find(Comment.M, l, st, en, additional);\n  export const eachM = (cs: Comment.List, cb: (c: I) => void) =>\n    cs.forEach((c) => c.type === Comment.M && cb(c));\n}\n","import { Str } from './str';\n\nexport namespace Args {\n  type Item = {\n    st: number;\n    en: number;\n    pending: Item[];\n    args: ValidArg[];\n  };\n  type ValidArg = Item | string;\n  /* eslint-disable no-unused-vars */\n  export enum TYPE {\n    NUMBER,\n    ID,\n    FNCALL,\n    COMPLEX,\n  }\n  /* eslint-enable no-unused-vars */\n  export type I = {\n    type: TYPE;\n    value: string;\n    keyword?: string;\n  };\n  export const parse = (str: string) => {\n    const ExpressionsRe = /(?<fn>[\\w]*)[\\s|n]*\\((?<ctt>[^(|)]*)\\)/;\n    const expressions: I[] = [];\n    const parseType = (str: string): I | number => {\n      let nm: RegExpExecArray | null;\n      if ((nm = /(?<fn>[\\w]*)[\\s|n]*\\((?<ctt>[^(|)]*)\\)/.exec(str))) {\n        if (nm.groups)\n          return { type: TYPE.FNCALL, value: str, keyword: nm.groups.fn };\n        throw new Error(\"what' wrong...\");\n      }\n      if (!/[^\\d|\\s|\\n|.|-]/.exec(str)) {\n        return { type: TYPE.NUMBER, value: str };\n      }\n      if ((nm = /^[\\s|\\n]*:\\$:(?<id>\\d*):\\$:[\\s|\\n]*$/.exec(str))) {\n        if (nm.groups) return parseInt(nm.groups.id);\n        throw new Error(\"what' wrong here...\");\n      }\n      if ((nm = /^[\\s|\\n]*(?<kw>[a-zA-Z_]\\w*)[\\s|\\n]*$/.exec(str))) {\n        if (nm.groups)\n          return { type: TYPE.ID, value: str, keyword: nm.groups.kw };\n        throw new Error(\"what' wrong here as well...\");\n      }\n      return { type: TYPE.COMPLEX, value: str };\n    };\n    const replaceExp = (str: string): string => {\n      const re = /:\\$:(?<id>\\d*):\\$:/;\n      let m: RegExpExecArray | null;\n      while ((m = re.exec(str))) {\n        if (m.groups) {\n          const k = Number(m.groups.id);\n          const rep = replaceExp(expressions[k].value);\n          str = Str.Splice(str, m.index, m[0].length, rep);\n        } else {\n          throw new Error('no way...');\n        }\n      }\n      return str;\n    };\n    let m: RegExpExecArray | null;\n    while ((m = ExpressionsRe.exec(str))) {\n      if (!m.groups) throw new Error('wtf');\n      let expId = expressions.length;\n      if (m.groups.fn) {\n        expressions.push(parseType(m[0]) as I);\n      } else {\n        const tk = parseType(m.groups.ctt);\n        if (typeof tk === 'object') {\n          expressions.push(tk);\n        } else {\n          expId = tk;\n        }\n      }\n      str = Str.Splice(str, m.index, m[0].length, `:$:${expId}:$:`);\n    }\n    const args = str.split(',').map((s) => {\n      const parsed = parseType(s);\n      const tk = typeof parsed === 'object' ? parsed : expressions[parsed];\n      tk.value = replaceExp(tk.value);\n      return tk;\n    });\n    return args;\n  };\n}\n","import { Str } from './str';\nimport { Args } from './args';\n\nexport namespace Var {\n  export namespace Type {\n    export const isNumber = (t: string) =>\n      ['float', 'int', 'uint'].indexOf(t) >= 0;\n    export const isVec = (t: string) => ['vec2', 'vec3'].indexOf(t) >= 0;\n    export const isBool = (t: string) => ['bool'].indexOf(t) >= 0;\n    export const assert = (t: string): string => {\n      if (!isNumber(t) && !isVec(t) && !isBool(t))\n        throw new Error('Invalid type: ' + t);\n      return isNumber(t)\n        ? 'number'\n        : Type.isVec(t)\n        ? 'vec'\n        : Type.isBool(t)\n        ? 'bool'\n        : 'never';\n    };\n  }\n  export type UiUi = {\n    id?: string;\n    type: string;\n    label: string;\n    args?: string[];\n    value: (UiUi | number)[] | number;\n    settings?: { flow?: 'row' | 'col' } | number[];\n    children?: string[];\n  };\n  export type UiUiList = { [key: string]: UiUi };\n\n  export type I = {\n    type: string;\n    subtype: string;\n    name: string;\n    size: number;\n    value: string | Args.I[];\n    pos: Str.Range;\n    args?: any[];\n    uiuiInstruction?: string;\n    uiui?: UiUi;\n    replacement?: string;\n  };\n  export type List = Var.I[];\n  export type NamedList = { [key: string]: Var.I };\n  export const find = (name: string, list: List) => {\n    return list.find((v) => v.name === name);\n  };\n  export const parse = (code: string) => {\n    const re =\n      /\\b(?<type>float|int|uint|vec2|vec3)[\\s|\\n]+(?<name>.*?)[\\s|\\n]*(\\[(?<dim>\\d+)\\])?[\\s|\\n]*=[\\s|\\n]?(?<value>.*)[\\s|\\n]?;/g;\n    let ex: RegExpExecArray | null;\n    const vars: Var.List = [];\n    while ((ex = re.exec(code))) {\n      if (!ex.groups) throw new Error('oh no!!');\n      const { type, name, value: _value, dim } = ex.groups;\n      let value: string | Args.I[] = _value;\n      if (['vec2', 'vec3'].indexOf(type) >= 0) {\n        const size: number = +type.substring(3, 4);\n        const vre = /\\((.*)\\)/.exec(_value);\n        if (!vre) throw new Error('Unparsable Var');\n        value = Args.parse(vre[1]);\n        vars.push({\n          name,\n          type,\n          size,\n          value,\n          subtype: 'vec',\n          pos: Str.Location(code.substring(0, ex.index), ex[0]),\n        });\n      } else {\n        const size: number = +(dim ?? '1');\n        if (size > 1) {\n          const vre = /\\((.*)\\)/.exec(_value);\n          if (!vre) throw new Error('Unparsable Var');\n          value = Args.parse(vre[1]);\n        }\n        vars.push({\n          type,\n          name,\n          value,\n          size,\n          subtype: Type.assert(type),\n          pos: Str.Location(code.substring(0, ex.index), ex[0]),\n        });\n      }\n    }\n    return vars;\n  };\n}\n","import { Str } from './str';\nimport { Var } from './var';\n\nexport namespace Struct {\n  export namespace Prop {\n    export type I = {\n      name: string;\n      type: string;\n      pos: Str.Range;\n      size: number;\n      uiui?: string;\n    };\n    export type List = Prop.I[];\n  }\n  export type I = {\n    name: string;\n    content: {\n      value: string;\n      pos: Str.Range;\n    };\n    pos: Str.Range;\n    properties: Struct.Prop.List;\n    uiui?: string;\n  };\n  export type List = Struct.I[];\n  export const parseDefinition = (code: string) => {\n    const sRe = /\\b(struct\\b[\\s|\\n]*(\\w*)[\\s|\\n]*{)(.*?)}/gs;\n    const spRe = /(\\w*)[\\s|\\n]*(\\w*)[\\s|\\n]*;/gs;\n    const structs: Struct.List = [];\n    let m: RegExpExecArray | null, p: RegExpExecArray | null;\n    while ((m = sRe.exec(code)) && m[0].length > 0) {\n      const pos = Str.Location(code.substring(0, m.index), m[0]);\n      const struct: Struct.I = {\n        name: m[2],\n        content: {\n          value: m[3],\n          pos: Str.Location(m[1], m[3], pos.s),\n        },\n        pos,\n        properties: [],\n      };\n      structs.push(struct);\n      while ((p = spRe.exec(struct.content.value)) && p[0].length > 1) {\n        const before = struct.content.value.substring(0, p.index);\n        struct.properties.push({\n          type: p[1],\n          name: p[2],\n          size: 1,\n          pos: Str.Location(before, p[0], struct.content.pos.s),\n        });\n      }\n    }\n    return structs;\n  };\n  export const withName = (list: Struct.List, name: string) => {\n    const s = list.find((s: Struct.I) => s.name === name);\n    if (!s) throw new Error('Struct not found: ' + name);\n    return s;\n  };\n\n  export const parseValue = (\n    code: string,\n    type: string,\n    varname: string,\n    structs: List\n  ) => {\n    const struct = withName(structs, type);\n    const ctt = new RegExp(\n      `^[\\\\s|\\\\n]*${struct.name}[\\\\s|\\\\n]*\\\\((.*)\\\\)`,\n      'sm'\n    );\n    const cttEx = ctt.exec(code);\n    if (!cttEx)\n      throw new Error(`Error Parsing Struct content for: ${struct.name}`);\n    const argsList = Str.splitArgs(cttEx[1]);\n    const args: (string | Var.I)[] = [];\n    struct.properties.forEach((p, i) => {\n      const arg = argsList[i];\n      if (!p.uiui || p.uiui.indexOf('@uiui') < 0) {\n        args.push(arg);\n        return;\n      }\n      const argVarName = `${varname}_${p.name}`;\n      if (Var.Type.isNumber(p.type)) {\n        if (Str.isNumber(arg)) {\n          args.push({\n            name: argVarName,\n            value: arg,\n            subtype: 'number',\n            type: p.type,\n            size: p.size,\n            uiuiInstruction: p.uiui,\n            pos: p.pos,\n          });\n        } else {\n          args.push(arg);\n        }\n      } else if (Var.Type.isVec(p.type)) {\n        args.push(arg);\n      } else {\n        const argRe = /^(\\w*)\\(.*\\)$/.exec(arg);\n        if (!argRe)\n          throw new Error('Error Parsing Struct content for: ' + struct.name);\n        const structVar = parseValue(arg, p.type, argVarName, structs);\n        args.push(structVar);\n      }\n    });\n    return {\n      type: struct.name,\n      subtype: 'struct',\n      name: varname,\n      value: code,\n      args,\n    } as Var.I;\n  };\n\n  export const parseDeclarations = (\n    code: string,\n    struct: Struct.I,\n    structs: List\n  ) => {\n    const declarations: Var.List = [];\n    const n = struct.name;\n    const w = '[\\\\n|\\\\s]*';\n    const re = new RegExp(\n      '\\\\b' + n + '\\\\b' + w + '?(\\\\w*)' + w + '=(' + w + n + '\\\\(.*?\\\\);)',\n      'gs'\n    );\n    let ex: RegExpExecArray | null;\n    while ((ex = re.exec(code))) {\n      const o = parseValue(ex[2], struct.name, ex[1], structs);\n      o.pos = Str.Location(code.substring(0, ex.index), ex[0]);\n      declarations.push(o);\n    }\n    return declarations;\n  };\n}\n","import { Str } from './str';\nimport { Comment } from './comment';\nimport { Struct } from './struct';\nimport { Var } from './var';\nimport { Args } from './args';\n\ntype ProcData = {\n  comments: Comment.List;\n  structs: Var.List;\n  vars: Var.List;\n  code: string;\n};\ntype UiUiPanelCfg = {\n  type: 'panel';\n  label: string;\n  settings: {\n    flow: 'col' | 'row';\n  };\n  children?: string[];\n  value: Var.UiUi[];\n};\ntype Uniform = {\n  type: string;\n  name: string;\n  size: number;\n};\n\nfunction initData(raw: string): ProcData {\n  let { comments, code } = Comment.process(raw);\n  code = code.replace(/#if[\\s\\S]*?#endif/g, Str.ReplaceAllButNLs);\n  code = code.replace(/#\\w?.*/g, Str.ReplaceAllButNLs);\n  const sDefs = Struct.parseDefinition(code);\n  const vars = Var.parse(code);\n  //\n  const isUiUi = (c: Comment.I) => c.content.indexOf('@uiui') >= 0;\n  const getUiUi = (st: number, en: number) =>\n    Comment.findS(comments, st, en, isUiUi) ||\n    Comment.findL(comments, st - 1, en, isUiUi) ||\n    undefined;\n  sDefs.forEach((s: Struct.I) => {\n    s.uiui = getUiUi(s.pos.s.row, s.content.pos.s.row);\n    s.properties.forEach((p: Struct.Prop.I) => {\n      p.uiui = getUiUi(p.pos.s.row, p.pos.e.row);\n    });\n  });\n  vars.forEach((v) => {\n    v.uiuiInstruction = getUiUi(v.pos.s.row, v.pos.e.row);\n  });\n  //\n  function injectIntoStruct(s: Var.I) {\n    if ('uiuiInstruction' in s) return s;\n    if ('pos' in s) {\n      s.uiuiInstruction = getUiUi(s.pos.s.row, s.pos.e.row);\n    } else {\n      console.log('HERE');\n      const sp = s as any;\n      const refS = Struct.withName(sDefs, sp.type);\n      if (refS.uiui) sp.uiuiInstruction = refS.uiui;\n    }\n    if (s.args) {\n      s.args.forEach((a) => {\n        if (typeof a === 'string') return;\n        if ('subtype' in a) injectIntoStruct(a);\n      });\n    }\n    return s;\n  }\n  const structs: Var.List = [];\n  sDefs.forEach((s) => {\n    Struct.parseDeclarations(code, s, sDefs).forEach((d) =>\n      structs.push(injectIntoStruct(d))\n    );\n  });\n  return { code, structs, vars, comments };\n}\n\nfunction parsePanelUiUiArgs(args: string): UiUiPanelCfg | undefined {\n  const r =\n    /@uiui:panel\\s*(?<name>.+?)\\s*((?<flow>[V|>])\\s*)?(\\[\\s*(?<children>.*)\\s*\\])?$/m.exec(\n      args\n    );\n  if (!r || !r.groups) return;\n  const flow = r.groups.flow === '>' ? 'row' : 'col';\n  return {\n    type: 'panel',\n    label: r.groups.name,\n    settings: { flow },\n    children: r.groups.children\n      ? r.groups.children.replace(/\\s/g, '').split(',')\n      : [],\n    value: [],\n  };\n}\n\nfunction parseVarUiUiArgs(v: Var.I) {\n  if (!v.uiuiInstruction) return;\n  const r =\n    /\\s*@uiui:(?<type>\\w*)\\s*(?<label>.*?)\\s*\\(\\s*(?<args>.*)\\s*\\)/.exec(\n      v.uiuiInstruction\n    );\n  if (!r || !r.groups) {\n    if (v.uiuiInstruction) {\n      const rp = parsePanelUiUiArgs(v.uiuiInstruction);\n      if (rp) v.uiui = rp;\n    }\n    return;\n  }\n  v.uiui = {\n    type: r.groups.type,\n    label: r.groups.label,\n    args: r.groups.args.replace(/\\s/g, '').split(','),\n    value: [],\n  };\n  const t = v.type + (v.size > 1 ? `[${v.size}]` : '');\n  v.replacement = `uniform ${t} ${v.name};`;\n}\n\nfunction getDeclaredPanels(comments: Comment.List) {\n  const panels: { [key: string]: UiUiPanelCfg } = {};\n  Comment.eachM(comments, (c) => {\n    if (/@uiui/.test(c.content)) {\n      const re = /(@uiui:panel.*)\\n/g;\n      let r;\n      while ((r = re.exec(c.content))) {\n        const panel = parsePanelUiUiArgs(r[1]);\n        if (panel) panels[panel.label] = panel;\n      }\n    }\n  });\n  return panels;\n}\n\nfunction processPanels(comments: Comment.List, vars: Var.UiUiList) {\n  const panels = getDeclaredPanels(comments);\n  Object.keys(vars).forEach((k) => {\n    if (vars[k].type === 'panel') {\n      panels[k] = vars[k] as any as UiUiPanelCfg;\n      delete vars[k];\n    }\n  });\n  const revisePanelHierarchy = (p: UiUiPanelCfg) => {\n    if (!p || !('children' in p)) return;\n    (p.children || []).forEach((c) => {\n      if (c in panels) {\n        const cp = panels[c];\n        delete panels[c];\n        p.value.push(cp);\n        revisePanelHierarchy(cp);\n      } else if (c in vars) {\n        p.value.push(vars[c]);\n      }\n    });\n    delete p.children;\n  };\n  Object.keys(panels).forEach((name) => {\n    revisePanelHierarchy(panels[name]);\n  });\n  return Object.keys(panels).map((name) => panels[name]);\n}\n\nfunction processStructReplacement(s: Var.I, vars: Var.List) {\n  let code = '';\n  const rs: string[] = [];\n  const as: string[] = [];\n  const uniforms: Uniform[] = [];\n  if (s.uiuiInstruction) {\n    vars.push(s);\n    if (s.args) {\n      s.args.forEach((a) => {\n        if (typeof a === 'string') {\n          as.push(a);\n        } else {\n          as.push(a.name);\n          if (a.type === 'int' || a.type === 'float' || a.type === 'uint') {\n            const t = a.type + (a.size > 1 ? `[${a.size}]` : '');\n            rs.unshift(`uniform ${t} ${a.name};`);\n            uniforms.push({ type: a.type, name: a.name, size: a.size });\n            vars.push(a);\n          } else {\n            const d = processStructReplacement(a, vars);\n            if (d.uniforms.length > 0) uniforms.push(...d.uniforms);\n            if (d.code) rs.push(d.code + '\\n');\n          }\n        }\n      });\n    }\n    if (rs.length > 0) {\n      const rss = rs.join('\\n');\n      const ass = as.join(',');\n      code = `${rss}\\n${s.type} ${s.name} = ${s.type}(${ass});`;\n    }\n  }\n  return { code, uniforms };\n}\n\nexport function processGlslCode(raw: string) {\n  const data = initData(raw);\n  const vars: Var.UiUiList = {};\n  const uniforms: Uniform[] = [];\n  const replacements: Str.Replacement[] = [];\n  data.structs.forEach((s) => {\n    const d = processStructReplacement(s, data.vars);\n    if (d.code) {\n      replacements.push({\n        start: s.pos.s.off,\n        end: s.pos.e.off,\n        text: d.code,\n      });\n    }\n    if (d.uniforms.length > 0) uniforms.push(...d.uniforms);\n  });\n  data.vars.forEach((v) => {\n    parseVarUiUiArgs(v);\n    if (v.uiui) {\n      if (v.uiui.type === 'panel') {\n        v.uiui.value = [];\n        const c: string[] = [];\n        if (v.args) {\n          v.args.forEach((a) => {\n            if (typeof a === 'object') c.push(a.name);\n          });\n        }\n        v.uiui.children = c;\n      } else {\n        if (Array.isArray(v.value)) {\n          v.uiui.value = v.value.map((val) => {\n            if (val.type === Args.TYPE.NUMBER) return Number(val.value);\n            throw new Error(\n              `cannot have this value (${val.value}) inside a var to be transformed into a uiui`\n            );\n          });\n        } else {\n          v.uiui.value = Number(v.value);\n        }\n        v.uiui.settings = (v.uiui.args || []).map((a) => Number(a));\n      }\n      vars[v.name] = { id: v.name, ...v.uiui };\n    }\n    if (v.replacement) {\n      if ('pos' in v) {\n        uniforms.push({\n          type: v.type,\n          name: v.name,\n          size: v.size,\n        });\n        replacements.push({\n          start: v.pos.s.off,\n          end: v.pos.e.off,\n          text: v.replacement,\n        });\n      }\n    }\n  });\n  //\n  let code = raw;\n  replacements\n    .sort((a, b) => b.start - a.start)\n    .forEach((r) => {\n      code = Str.replace(code, r);\n    });\n  //\n  return {\n    uiui: processPanels(data.comments, vars),\n    code,\n    uniforms,\n  };\n}\n","import React from 'react';\nimport { GLSL } from 'glslcv';\nimport styles from './glue/styles.module.css';\nimport { processGlslCode } from './glue/processor';\nimport { RootElem } from '../RootElem';\n\nclass FragShaderMiddleware implements GLSL.Shader.Middleware {\n  init: boolean = false;\n  keys: any;\n  updateUniforms(us: GLSL.Uniform.Info[]) {\n    if (!this.keys) return;\n    us.forEach((uni) => {\n      if (uni.name in this.keys) uni.value = this.keys[uni.name].value;\n    });\n  }\n\n  setData(data: any) {\n    const keys: any = {};\n    function processPanel(panelData: any) {\n      panelData.forEach((el: any) => {\n        if (el.type === 'panel') {\n          processPanel(el.value);\n        } else {\n          keys[el.id] = el;\n        }\n      });\n    }\n    processPanel(data.uiui);\n    this.keys = keys;\n  }\n}\n\ntype CodeOrUrl =\n  | { code: string; url?: undefined }\n  | { url: string; code?: undefined };\ntype Args = CodeOrUrl & { postProcessData?: (data: any) => void };\n\nexport function UiUiCanvas({ code, url, postProcessData }: Args) {\n  const [_code, setCode] = React.useState(code);\n  const [_url] = React.useState(url);\n  const [uiuiJSX, setUiuiJSX] = React.useState<React.JSX.Element | null>(null);\n  const canvasRef = React.useRef<HTMLCanvasElement>(null);\n\n  const [mw] = React.useState(new FragShaderMiddleware());\n\n  React.useEffect(() => {\n    if (_url) {\n      fetch(_url)\n        .then((res) => res.text())\n        .then((text) => setCode(text));\n    }\n  }, [_url]);\n\n  React.useEffect(() => {\n    if (!mw.init && canvasRef.current && _code) {\n      const data = processGlslCode(_code);\n      console.log(data.uiui);\n      if (postProcessData) postProcessData(data);\n      mw.setData(data);\n\n      setUiuiJSX(RootElem.withData(data.uiui));\n      GLSL.init2D(canvasRef.current)\n        .addFragmentShaderMiddleware(mw)\n        .setShaderSource('fragment', data.code)\n        .play();\n      mw.init = true;\n    }\n  }, [canvasRef, _code, mw, postProcessData]);\n  return (\n    <div className={styles.container}>\n      <canvas ref={canvasRef} className={styles.glsl_canvas}></canvas>\n      {uiuiJSX}\n    </div>\n  );\n}\n","import { RootElem } from './RootElem';\nimport { Config as CFG } from './config';\nimport { UiUiPanel } from './ui/Panel';\nimport { UiUiSlider } from './ui/Slider';\nimport { UiUiKnob } from './ui/Knob';\nimport { UiUiColorRamp } from './ui/ColorRamp';\nimport { UiUiPoint } from './ui/Point';\nimport { UiUiSine } from './ui/Sine';\nimport { UiUiSelect } from './ui/Select';\nimport type * as TypeUtils from './utils/numbers';\nimport { UiUiGroup } from './ui/Group';\nimport { Styles as ST } from './styles';\nimport { UiUiCanvas } from './utils/Canvas';\n\nCFG.enable([\n  UiUiPanel,\n  UiUiSlider,\n  UiUiKnob,\n  UiUiColorRamp,\n  UiUiPoint,\n  UiUiSine,\n  UiUiSelect,\n]);\n\nexport namespace UiUi {\n  export const Root = RootElem;\n  export const Canvas = UiUiCanvas;\n  /* eslint-disable no-unused-vars */\n  export import Config = CFG;\n  export import Styles = ST;\n  /* eslint-enable */\n  export namespace Types {\n    export type THREE_NUMBERS = TypeUtils.THREE_NUMBERS;\n    export type SIX_NUMBERS = TypeUtils.SIX_NUMBERS;\n  }\n  export namespace Lib {\n    export const enable = CFG.enable;\n    export const Group = UiUiGroup;\n    export const Panel = UiUiPanel;\n    export const Slider = UiUiSlider;\n    export const Knob = UiUiKnob;\n    export const ColorRamp = UiUiColorRamp;\n    export const Point = UiUiPoint;\n    export const Sine = UiUiSine;\n    export const Select = UiUiSelect;\n  }\n}\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","UtilLayer","_singleton","UiUiUtilLayer","React","useRef","useEffect","current","className","styles","utilLayer","getSingleton","setRole","role","setAttribute","resetRole","Config","registry","RootElem","_a","data","top","bottom","_b","defaultDock","_c","useState","tElems","setTElems","_d","bElems","setBElems","onChange","o","console","log","pushElems","useCallback","els","dock","__spreadArray","pdata","Array","isArray","process","render","concat","uiUiRoot","vars","docks","rel","topDock","bottomDock","register","e","k","b","name","cfgKey","elem","builder","enabled","enable","map","c","tmp","Object","keys","panels","key","p","label","settings","flow","orientation","value","cn","children","r","push","elements","args","ret","t","reg","build","withData","UiUiGroup","uiGroup","UiUiPanel","setChildren","obj","undefined","Styles","main","of","N","pcent","s","v","a","UiUiSlider","thumbRef","setValue","props","setProps","prop","i","setProperty","uiSlider","uiSliderThumbReplacement","uiSliderFlexContainer","htmlFor","uiSliderValue","min","max","step","Number","target","V2","x","y","M2","ellipse","aS","aD","phi","rM","radToRot","add","times","fromRad","Math","PI","fM","str","fA","radToAngle","ev","radius","cos","sin","m","UiUiRuler","mms","show","rulerRef","display","setDisplay","_e","setVal","_f","setNormalized","_g","n","RulerStyles","rulerWrapper","ruler","rulerInner","rulerIndicator","UiUiKnob","rulerShow","setRulerShow","normalized","properties","mPos","onMouseMove","clientX","clientY","diff","round","onMouseUp","preventDefault","removeEventListener","full","KnobStyles","scale","width","height","onMouseDown","addEventListener","strokeWidth","fill","stroke","opacity","d","fixDigits","toFixed","limit","StepCtrl","this","range","stepDigits","floor","toString","split","length","fromArray","prototype","filter","adj","abs","normalize","denormalize","getXYCtrlsFromArray","grayBackground","UiUiXYPad","background","getDragabbleArea","el","container","parentElement","cB","getBoundingClientRect","eB","w","h","setElemPos","pos","left","DragDelegate","tgt","sets","info","l","right","brInfo","assign","ori","getInfo","all","onDrag","dragging","onRelease","released","onmousedown","pressed","updateDisplay","opts","avail","flipX","flipY","norm","UiUiXYHandle","stepCtrls","options","__assign","id","xyHandleRef","parent","dontSetPos","denorm","elementCenter","area","pp","nInfo","constrained","XY","defaultUniformsUpdater","us","UiUiCanvasBckgd","onUniformsUpdate","fragShaderCode","autoPlay","canvasRef","FragShaderMiddleware","cb","_glsl","updater","updateUniforms","defineProperty","get","set","glsl","mw","callbacks","refresh","drawFrame","GLSL","init2D","addFragmentShaderMiddleware","setShaderSource","play","Pad","Handle","Canvas","Bckgd","processSettings","slice","Step","getCtrlsFromArray","rampShaderCode","UiUiColorRamp","wrapperRef","values","setValues","defStepSet","getV","indexOf","onUpdate","vs","setV","uiColorRamp","cr_pad","u","UiUiPoint","setProperties","onSliderUpdate","elO","toLocaleLowerCase","wrapper","xy","UiUiSine","bckgd","uiSine","UiUiSelect","selectRef","uiSelect","defaultValue","entries","val","forEach","Str","Comment","Args","Var","Struct","initData","raw","comments","code","replace","ReplaceAllButNLs","sDefs","parseDefinition","parse","isUiUi","content","getUiUi","st","en","findS","findL","injectIntoStruct","uiuiInstruction","row","sp","refS","withName","uiui","structs","parseDeclarations","parsePanelUiUiArgs","exec","groups","processPanels","eachM","test","re","panel","getDeclaredPanels","revisePanelHierarchy","cp","processStructReplacement","rs","as","uniforms","size","unshift","apply","rss","join","ass","processGlslCode","replacements","start","off","end","text","replacement","rp","parseVarUiUiArgs","c_1","TYPE","NUMBER","Error","sort","Height","match","HeightAt","index","substring","Splice","len","FirstMatch","list","res","Location","before","bp","isNumber","splitArgs","closedPs","splice","whileMatches","global","L","S","M","find","additional","is","findM","cs","ExpressionsRe","expressions","parseType","nm","FNCALL","keyword","fn","parseInt","ID","kw","COMPLEX","replaceExp","rep","expId","tk","ctt","parsed","Type","isVec","isBool","assert","ex","name_1","_value","dim","vre","subtype","sRe","spRe","struct","parseValue","varname","cttEx","RegExp","argsList","arg","argVarName","structVar","declarations","UiUi","Lib","init","_this","uni","setData","processPanel","panelData","UiUiCanvas","url","postProcessData","_code","setCode","_url","uiuiJSX","setUiuiJSX","fetch","then","CFG","Root","ST","Group","Panel","Slider","Knob","ColorRamp","Point","Sine","Select"],"mappings":"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","x_google_ignoreList":[0]}